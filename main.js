!function(){var t={588:function(t,e,n){function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}var o=function(t){"use strict";var e,n=Object.prototype,o=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var o=e&&e.prototype instanceof m?e:m,i=Object.create(o.prototype),a=new j(r||[]);return i._invoke=function(t,e,n){var r=p;return function(o,i){if(r===d)throw new Error("Generator is already running");if(r===y){if("throw"===o)throw i;return R()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var u=L(a,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===p)throw r=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var c=f(t,e,n);if("normal"===c.type){if(r=n.done?y:h,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=y,n.method="throw",n.arg=c.arg)}}}(t,n,a),i}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",v={};function m(){}function _(){}function b(){}var g={};s(g,a,(function(){return this}));var w=Object.getPrototypeOf,k=w&&w(w(P([])));k&&k!==n&&o.call(k,a)&&(g=k);var E=b.prototype=m.prototype=Object.create(g);function S(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function n(i,a,u,c){var s=f(t[i],t,a);if("throw"!==s.type){var l=s.arg,p=l.value;return p&&"object"===r(p)&&o.call(p,"__await")?e.resolve(p.__await).then((function(t){n("next",t,u,c)}),(function(t){n("throw",t,u,c)})):e.resolve(p).then((function(t){l.value=t,u(l)}),(function(t){return n("throw",t,u,c)}))}c(s.arg)}var i;this._invoke=function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}}function L(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,L(t,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var o=f(r,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function P(t){if(t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function n(){for(;++r<t.length;)if(o.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}return{next:R}}function R(){return{value:e,done:!0}}return _.prototype=b,s(E,"constructor",b),s(b,"constructor",_),_.displayName=s(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,c,"GeneratorFunction")),t.prototype=Object.create(E),t},t.awrap=function(t){return{__await:t}},S(x.prototype),s(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new x(l(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(E),s(E,c,"Generator"),s(E,a,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=P,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(r,o){return u.type="throw",u.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=o.call(a,"catchLoc"),s=o.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;C(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:P(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}("object"===r(t=n.nmd(t))?t.exports:{});try{regeneratorRuntime=o}catch(t){"object"===("undefined"==typeof globalThis?"undefined":r(globalThis))?globalThis.regeneratorRuntime=o:Function("r","regeneratorRuntime = r")(o)}},413:function(t,e,n){"use strict";t.exports=n.p+"c75819857ff1599f0c50.svg"}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={id:r,loaded:!1,exports:{}};return t[r](i,i.exports,n),i.loaded=!0,i.exports}n.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t},n.p="",function(){"use strict";function t(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n(588);var r=function(){function n(t,e,r,o,i,a){var u,c,s=this,l=t.name,f=t.link,p=t.owner._id,h=t._id,d=t.likes;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),c=function(){s._card.remove()},(u="_removeCard")in this?Object.defineProperty(this,u,{value:c,enumerable:!0,configurable:!0,writable:!0}):this[u]=c,this._name=l,this._link=f,this._template=e,this._handleCardClick=r,this._handleDeleteClick=o,this._shouldHideDeleteIcon=i,this._owner=p,this._id=h,this._likes=d,this._likesHandlers=a}var r,o,i,a;return r=n,o=[{key:"_shouldShowLikes",value:function(){var t=this._card.querySelector(".card__likes-num"),e=this._card.querySelector(".card__like-button");this._likes.length>0?(t.textContent=this._likes.length,t.style.display="block"):t.style.display="none",this._likesHandlers.isUserInfoLike(this._likes)?e.classList.add("card__like-button-full"):e.classList.remove("card__like-button-full")}},{key:"_createClone",value:function(){this._card=this._template.cloneNode(!0);var t=this._card.querySelector(".card__image");return this._card.querySelector(".card__text").textContent=this._name,t.src=this._link,t.alt=this._name,this._shouldShowLikes(),this._card}},{key:"_onDeleteButtonClick",value:function(){this._handleDeleteClick(this._id,this._removeCard)}},{key:"_addDeleteButtonListener",value:function(){var t=this,e=this._card.querySelector(".card__delete-button");this._shouldHideDeleteIcon(this._owner)?e.classList.add("card__delete-button_visibility"):e.addEventListener("click",(function(){t._onDeleteButtonClick()}))}},{key:"_onLikeClick",value:(i=regeneratorRuntime.mark((function t(){var e,n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this._card.querySelector(".card__like-button"),n={},!e.classList.contains("card__like-button-full")){t.next=8;break}return t.next=5,this._likesHandlers.delete(this._id);case 5:n=t.sent,t.next=11;break;case 8:return t.next=10,this._likesHandlers.add(this._id);case 10:n=t.sent;case 11:n&&(r=n.likes,this._likes=r,this._shouldShowLikes());case 12:case"end":return t.stop()}}),t,this)})),a=function(){var e=this,n=arguments;return new Promise((function(r,o){var a=i.apply(e,n);function u(e){t(a,r,o,u,c,"next",e)}function c(e){t(a,r,o,u,c,"throw",e)}u(void 0)}))},function(){return a.apply(this,arguments)})},{key:"_addLikeButtonListener",value:function(){var t=this;this._card.querySelector(".card__like-button").addEventListener("click",(function(){t._onLikeClick()}))}},{key:"_onCardClick",value:function(){this._handleCardClick({link:this._link,text:this._name})}},{key:"_addCardImageListener",value:function(){var t=this;this._card.querySelector(".card__image").addEventListener("click",(function(){t._onCardClick()}))}},{key:"_setEventListeners",value:function(){this._addDeleteButtonListener(),this._addLikeButtonListener(),this._addCardImageListener()}},{key:"createCard",value:function(){return this._card=this._createClone(),this._setEventListeners(),this._card}}],o&&e(r.prototype,o),n}();function o(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function i(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function u(t){o(a,r,i,u,c,"next",t)}function c(t){o(a,r,i,u,c,"throw",t)}u(void 0)}))}}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var u=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._url=e.baseUrl,this._token=e.token}var e,n,r,o,u,c,s,l,f,p;return e=t,n=[{key:"getToken",value:function(){return this._token}},{key:"getInitialCards",value:(p=i(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(this._url,"/cards"),{headers:{authorization:this._token}});case 2:if(!(e=t.sent).ok){t.next=7;break}return t.abrupt("return",e.json());case 7:console.log("Somthing went wrong",e.status,e.statusText);case 8:case"end":return t.stop()}}),t,this)}))),function(){return p.apply(this,arguments)})},{key:"getUserInfo",value:(f=i(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(this._url,"/users/me"),{headers:{authorization:this._token}});case 2:if(!(e=t.sent).ok){t.next=7;break}return t.abrupt("return",e.json());case 7:console.log("Somthing went wrong",e.status,e.statusText);case 8:case"end":return t.stop()}}),t,this)}))),function(){return f.apply(this,arguments)})},{key:"editUserInfo",value:(l=i(regeneratorRuntime.mark((function t(e,n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(this._url,"/users/me"),{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:e,about:n})});case 2:if(!(r=t.sent).ok){t.next=7;break}return t.abrupt("return",r.json());case 7:console.log("Somthing went wrong",r.status,r.statusText);case 8:case"end":return t.stop()}}),t,this)}))),function(t,e){return l.apply(this,arguments)})},{key:"addCard",value:(s=i(regeneratorRuntime.mark((function t(e,n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(this._url,"/cards"),{method:"POST",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:e,link:n})});case 2:if(!(r=t.sent).ok){t.next=7;break}return t.abrupt("return",r.json());case 7:console.log("Somthing went wrong",r.status,r.statusText);case 8:case"end":return t.stop()}}),t,this)}))),function(t,e){return s.apply(this,arguments)})},{key:"deleteCard",value:(c=i(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(this._url,"/cards/").concat(e),{method:"DELETE",headers:{authorization:this._token}});case 2:if(!(n=t.sent).ok){t.next=7;break}return t.abrupt("return",n.ok);case 7:console.log("Somthing went wrong",n.status,n.statusText);case 8:case"end":return t.stop()}}),t,this)}))),function(t){return c.apply(this,arguments)})},{key:"editProfileImage",value:(u=i(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(this._url,"/users/me/avatar"),{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({avatar:e})});case 2:if(!(n=t.sent).ok){t.next=7;break}return t.abrupt("return",{avatar:e});case 7:console.log("Somthing went wrong",n.status,n.statusText);case 8:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)})},{key:"addLike",value:(o=i(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(this._url,"/cards/likes/").concat(e),{method:"PUT",headers:{authorization:this._token}});case 2:if(!(n=t.sent).ok){t.next=7;break}return t.abrupt("return",n.json());case 7:console.log("Somthing went wrong",n.status,n.statusText);case 8:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},{key:"deleteLike",value:(r=i(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(this._url,"/cards/likes/").concat(e),{method:"DELETE",headers:{authorization:this._token}});case 2:if(!(n=t.sent).ok){t.next=7;break}return t.abrupt("return",n.json());case 7:console.log("Somthing went wrong",n.status,n.statusText);case 8:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})}],n&&a(e.prototype,n),t}(),c=n(413);function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var l=function(){function t(e){var n,r,o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r=function(t){"Escape"===t.key&&o.close()},(n="_handleEscClose")in this?Object.defineProperty(this,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[n]=r,this._popup=document.querySelector(e)}var e,n;return e=t,(n=[{key:"open",value:function(){this._popup.classList.add("popup_open"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_open"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var t=this;this._popup.addEventListener("click",(function(e){(e.target.classList.contains("popup__close-button")||e.target.classList.contains("popup"))&&t.close()}))}}])&&s(e.prototype,n),t}();function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function p(t,e){return p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},p(t,e)}function h(t,e){if(e&&("object"===f(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return d(t)}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(){return y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=v(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},y.apply(this,arguments)}function v(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=m(t)););return t}function m(t){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},m(t)}var _=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(o,t);var e,n,r=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=m(e);if(n){var o=m(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return h(this,t)});function o(t){var e,n,i,a,u;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),u=function(t){var r=t.link,i=t.text;y((e=d(n),m(o.prototype)),"open",e).call(e),n._cardImagePopup.src=r,n._cardImagePopup.alt=i,n._cardTextPopup.textContent=i},(a="open")in(i=d(n=r.call(this,t)))?Object.defineProperty(i,a,{value:u,enumerable:!0,configurable:!0,writable:!0}):i.open=u,n._cardImagePopup=n._popup.querySelector(".popup__card-image"),n._cardTextPopup=n._popup.querySelector(".popup__card-text"),n}return o}(l);function b(t){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(t)}function g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function w(t,e){return w=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},w(t,e)}function k(t,e){if(e&&("object"===b(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return E(t)}function E(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function S(){return S="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=x(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},S.apply(this,arguments)}function x(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=L(t)););return t}function L(t){return L=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},L(t)}var O=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&w(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=L(r);if(o){var n=L(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return k(this,t)});function a(t,e){var n,r,o,u,c;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),c=function(){r._form.querySelector(".form__button").textContent="Save",S((n=E(r),L(a.prototype)),"open",n).call(n)},(u="open")in(o=E(r=i.call(this,t)))?Object.defineProperty(o,u,{value:c,enumerable:!0,configurable:!0,writable:!0}):o.open=c,r._formSubmitHandler=e,r._form=r._popup.querySelector(".form"),r._inputs=r._form.querySelectorAll("input"),r._formValues={},r}return e=a,(n=[{key:"_onSubmit",value:function(){var t=this._form.querySelector(".form__button");return this._getInputValues(),t.textContent="Saving...",this._formSubmitHandler(this._formValues)}},{key:"_getInputValues",value:function(){var t=this;this._inputs.forEach((function(e){return t._formValues[e.name]=e.value}))}},{key:"setInputValues",value:function(t){var e=this;t.forEach((function(t,n){e._inputs[n].value=t}))}},{key:"getForm",value:function(){return this._form}},{key:"setEventListeners",value:function(){var t=this;S(L(a.prototype),"setEventListeners",this).call(this),this._popup.addEventListener("submit",(function(e){e.preventDefault(),t._onSubmit().then((function(){t.close()}))}))}},{key:"close",value:function(){S(L(a.prototype),"close",this).call(this),this._form.reset()}}])&&g(e.prototype,n),a}(l);function C(t){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},C(t)}function j(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function P(t,e){return P=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},P(t,e)}function R(t,e){if(e&&("object"===C(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return I(t)}function I(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function T(){return T="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=q(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},T.apply(this,arguments)}function q(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=B(t)););return t}function B(t){return B=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},B(t)}var D=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&P(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=B(r);if(o){var n=B(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return R(this,t)});function a(t,e){var n,r,o,u,c;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),c=function(t,e){T((n=I(r),B(a.prototype)),"open",n).call(n),r._cardId=t,r._removeHandler=e},(u="open")in(o=I(r=i.call(this,t)))?Object.defineProperty(o,u,{value:c,enumerable:!0,configurable:!0,writable:!0}):o.open=c,r._formSubmitHandler=e,r}return e=a,(n=[{key:"_onSubmit",value:function(){this._formSubmitHandler(this._cardId)&&this._removeHandler()}},{key:"setEventListeners",value:function(){var t=this;T(B(a.prototype),"setEventListeners",this).call(this),this._popup.addEventListener("submit",(function(e){e.preventDefault(),t._onSubmit(),t.close()}))}},{key:"close",value:function(){T(B(a.prototype),"close",this).call(this)}}])&&j(e.prototype,n),a}(l);function U(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var V=function(){function t(e,n){var r=e.items,o=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._items=r,this._renderer=o,this._container=document.querySelector(n)}var e,n;return e=t,(n=[{key:"setItems",value:function(t){this._items=t}},{key:"renderer",value:function(){var t=this;this._items.forEach((function(e){var n=t._renderer(e);t.addItem(n)}))}},{key:"addItem",value:function(t){this._container.append(t)}},{key:"prependItem",value:function(t){this._container.prepend(t)}}])&&U(e.prototype,n),t}();function A(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var N=function(){function t(e){var n=e.userNameSelector,r=e.userJobSelector,o=e.userAvatarSelector;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._userName=document.querySelector(n),this._userJob=document.querySelector(r),this._id="",this._avatar=document.querySelector(o)}var e,n;return e=t,(n=[{key:"getUserInfo",value:function(){return{name:this._userName.textContent,about:this._userJob.textContent,id:this._id,avatar:this._avatar.src}}},{key:"setUserInfo",value:function(t){var e=t.name,n=t.about,r=t._id,o=t.avatar;this._userName.textContent=e,this._userJob.textContent=n,this._id=r,this._avatar.src=o}},{key:"setAvatarLink",value:function(t){var e=t.avatar;this._avatar.src=e}}])&&A(e.prototype,n),t}();function H(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var F=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=n,this._inputElements=this._formElement.querySelectorAll(this._inputSelector),this._buttonElement=this._formElement.querySelector(this._submitButtonSelector)}var e,n;return e=t,(n=[{key:"_hideInputError",value:function(t){var e=this._formElement.querySelector("#".concat(t.id,"-error"));t.classList.remove(this._inputErrorClass),e.classList.remove(this._errorClass),e.textContent=""}},{key:"_showInputError",value:function(t){var e=this._formElement.querySelector("#".concat(t.id,"-error"));t.classList.add(this._inputErrorClass),e.textContent=t.validationMessage,e.classList.add(this._errorClass)}},{key:"_toggleButtonState",value:function(){Array.from(this._inputElements).some((function(t){return!t.validity.valid}))?this._buttonElement.classList.add(this._inactiveButtonClass):this._buttonElement.classList.remove(this._inactiveButtonClass)}},{key:"_checkInputValidity",value:function(t){t.validity.valid?this._hideInputError(t):this._showInputError(t)}},{key:"_setEventListeners",value:function(){var t=this;this._inputElements.forEach((function(e){e.addEventListener("input",(function(){t._checkInputValidity(e),t._toggleButtonState()}))}))}},{key:"resetValidation",value:function(){var t=this;this._toggleButtonState(),this._inputElements.forEach((function(e){t._hideInputError(e)}))}},{key:"enableValidation",value:function(){this._formElement.addEventListener("submit",(function(t){t.preventDefault()})),this._setEventListeners()}}])&&H(e.prototype,n),t}(),z=document.getElementById("image-header-logo"),G=document.querySelector(".profile__edit-button"),J=document.querySelector(".profile__add-button"),M=document.querySelector(".profile__image-edit-button"),Y=document.querySelector("#card-template").content.querySelector(".card"),$={inputSelector:".form__input",submitButtonSelector:".form__button",inactiveButtonClass:"form__button_disabled",inputErrorClass:"form__input_type_error",errorClass:"form__error_visible"};function K(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Q(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Q(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function W(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function X(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){W(i,r,o,a,u,"next",t)}function u(t){W(i,r,o,a,u,"throw",t)}a(void 0)}))}}var Z=new _(".popup_type_card-picture"),tt=new N({userNameSelector:".profile__info-name",userJobSelector:".profile__info-about",userAvatarSelector:".profile__image"}),et=new O(".popup_type_edit-profile",(function(t){var e=t.name,n=t.about;return st.editUserInfo(e,n).then((function(t){t&&tt.setUserInfo(t)}))})),nt=new O(".popup_type_add-card",(function(t){return lt.apply(this,arguments)})),rt=new D(".popup_type_card-delete",(function(t){return pt.apply(this,arguments)})),ot=new O(".popup_type_profile-image",(function(t){return ft.apply(this,arguments)})),it=new V({items:[],renderer:dt},".cards"),at=new F($,et.getForm()),ut=new F($,ot.getForm()),ct=new F($,nt.getForm()),st=new u({baseUrl:"https://around.nomoreparties.co/v1/group-12",token:"d32f6df6-a478-44c7-98e2-39f20efb7fb4"});function lt(){return(lt=X(regeneratorRuntime.mark((function t(e){var n,r,o,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.title,r=e.link,t.next=3,st.addCard(n,r);case 3:(o=t.sent)&&(i=dt(o),it.prependItem(i));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ft(){return(ft=X(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.avatar,t.next=3,st.editProfileImage(n);case 3:(r=t.sent)&&tt.setAvatarLink(r);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function pt(){return(pt=X(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,st.deleteCard(e);case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}z.src=c,Z.setEventListeners(),G.addEventListener("click",(function(t){var e=tt.getUserInfo(),n=e.name,r=e.about;et.setInputValues([n,r]),at.resetValidation(),et.open()})),J.addEventListener("click",(function(t){ct.resetValidation(),nt.open()})),M.addEventListener("click",(function(t){var e=tt.getUserInfo().avatar;ot.setInputValues([e]),ut.resetValidation(),ot.open()})),at.enableValidation(),ct.enableValidation(),ut.enableValidation(),et.setEventListeners(),nt.setEventListeners(),rt.setEventListeners(),ot.setEventListeners();var ht={add:st.addLike.bind(st),delete:st.deleteLike.bind(st),isUserInfoLike:function(t){var e=tt.getUserInfo().id;return t.some((function(t){return t._id===e}))}};function dt(t){return new r(t,Y,Z.open,rt.open,vt,ht).createCard()}function yt(){return(yt=X(regeneratorRuntime.mark((function t(){var e,n,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([st.getInitialCards(),st.getUserInfo()]);case 2:e=t.sent,n=K(e,2),r=n[0],(o=n[1])&&r&&(tt.setUserInfo(o),it.setItems(r),it.renderer());case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function vt(t){return tt.getUserInfo().id!==t}!function(){yt.apply(this,arguments)}()}()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ZV9tb2R1bGVzL3JlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvd2VicGFjay9ydW50aW1lL25vZGUgbW9kdWxlIGRlY29yYXRvciIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80L3dlYnBhY2svcnVudGltZS9wdWJsaWNQYXRoIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvdXRpbHMvQXBpLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aERlbGV0ZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9wYWdlL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE0LXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKi9cblxudmFyIHJ1bnRpbWUgPSAoZnVuY3Rpb24gKGV4cG9ydHMpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIE9wID0gT2JqZWN0LnByb3RvdHlwZTtcbiAgdmFyIGhhc093biA9IE9wLmhhc093blByb3BlcnR5O1xuICB2YXIgdW5kZWZpbmVkOyAvLyBNb3JlIGNvbXByZXNzaWJsZSB0aGFuIHZvaWQgMC5cbiAgdmFyICRTeW1ib2wgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgPyBTeW1ib2wgOiB7fTtcbiAgdmFyIGl0ZXJhdG9yU3ltYm9sID0gJFN5bWJvbC5pdGVyYXRvciB8fCBcIkBAaXRlcmF0b3JcIjtcbiAgdmFyIGFzeW5jSXRlcmF0b3JTeW1ib2wgPSAkU3ltYm9sLmFzeW5jSXRlcmF0b3IgfHwgXCJAQGFzeW5jSXRlcmF0b3JcIjtcbiAgdmFyIHRvU3RyaW5nVGFnU3ltYm9sID0gJFN5bWJvbC50b1N0cmluZ1RhZyB8fCBcIkBAdG9TdHJpbmdUYWdcIjtcblxuICBmdW5jdGlvbiBkZWZpbmUob2JqLCBrZXksIHZhbHVlKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7XG4gICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgd3JpdGFibGU6IHRydWVcbiAgICB9KTtcbiAgICByZXR1cm4gb2JqW2tleV07XG4gIH1cbiAgdHJ5IHtcbiAgICAvLyBJRSA4IGhhcyBhIGJyb2tlbiBPYmplY3QuZGVmaW5lUHJvcGVydHkgdGhhdCBvbmx5IHdvcmtzIG9uIERPTSBvYmplY3RzLlxuICAgIGRlZmluZSh7fSwgXCJcIik7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGRlZmluZSA9IGZ1bmN0aW9uKG9iaiwga2V5LCB2YWx1ZSkge1xuICAgICAgcmV0dXJuIG9ialtrZXldID0gdmFsdWU7XG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHdyYXAoaW5uZXJGbiwgb3V0ZXJGbiwgc2VsZiwgdHJ5TG9jc0xpc3QpIHtcbiAgICAvLyBJZiBvdXRlckZuIHByb3ZpZGVkIGFuZCBvdXRlckZuLnByb3RvdHlwZSBpcyBhIEdlbmVyYXRvciwgdGhlbiBvdXRlckZuLnByb3RvdHlwZSBpbnN0YW5jZW9mIEdlbmVyYXRvci5cbiAgICB2YXIgcHJvdG9HZW5lcmF0b3IgPSBvdXRlckZuICYmIG91dGVyRm4ucHJvdG90eXBlIGluc3RhbmNlb2YgR2VuZXJhdG9yID8gb3V0ZXJGbiA6IEdlbmVyYXRvcjtcbiAgICB2YXIgZ2VuZXJhdG9yID0gT2JqZWN0LmNyZWF0ZShwcm90b0dlbmVyYXRvci5wcm90b3R5cGUpO1xuICAgIHZhciBjb250ZXh0ID0gbmV3IENvbnRleHQodHJ5TG9jc0xpc3QgfHwgW10pO1xuXG4gICAgLy8gVGhlIC5faW52b2tlIG1ldGhvZCB1bmlmaWVzIHRoZSBpbXBsZW1lbnRhdGlvbnMgb2YgdGhlIC5uZXh0LFxuICAgIC8vIC50aHJvdywgYW5kIC5yZXR1cm4gbWV0aG9kcy5cbiAgICBnZW5lcmF0b3IuX2ludm9rZSA9IG1ha2VJbnZva2VNZXRob2QoaW5uZXJGbiwgc2VsZiwgY29udGV4dCk7XG5cbiAgICByZXR1cm4gZ2VuZXJhdG9yO1xuICB9XG4gIGV4cG9ydHMud3JhcCA9IHdyYXA7XG5cbiAgLy8gVHJ5L2NhdGNoIGhlbHBlciB0byBtaW5pbWl6ZSBkZW9wdGltaXphdGlvbnMuIFJldHVybnMgYSBjb21wbGV0aW9uXG4gIC8vIHJlY29yZCBsaWtlIGNvbnRleHQudHJ5RW50cmllc1tpXS5jb21wbGV0aW9uLiBUaGlzIGludGVyZmFjZSBjb3VsZFxuICAvLyBoYXZlIGJlZW4gKGFuZCB3YXMgcHJldmlvdXNseSkgZGVzaWduZWQgdG8gdGFrZSBhIGNsb3N1cmUgdG8gYmVcbiAgLy8gaW52b2tlZCB3aXRob3V0IGFyZ3VtZW50cywgYnV0IGluIGFsbCB0aGUgY2FzZXMgd2UgY2FyZSBhYm91dCB3ZVxuICAvLyBhbHJlYWR5IGhhdmUgYW4gZXhpc3RpbmcgbWV0aG9kIHdlIHdhbnQgdG8gY2FsbCwgc28gdGhlcmUncyBubyBuZWVkXG4gIC8vIHRvIGNyZWF0ZSBhIG5ldyBmdW5jdGlvbiBvYmplY3QuIFdlIGNhbiBldmVuIGdldCBhd2F5IHdpdGggYXNzdW1pbmdcbiAgLy8gdGhlIG1ldGhvZCB0YWtlcyBleGFjdGx5IG9uZSBhcmd1bWVudCwgc2luY2UgdGhhdCBoYXBwZW5zIHRvIGJlIHRydWVcbiAgLy8gaW4gZXZlcnkgY2FzZSwgc28gd2UgZG9uJ3QgaGF2ZSB0byB0b3VjaCB0aGUgYXJndW1lbnRzIG9iamVjdC4gVGhlXG4gIC8vIG9ubHkgYWRkaXRpb25hbCBhbGxvY2F0aW9uIHJlcXVpcmVkIGlzIHRoZSBjb21wbGV0aW9uIHJlY29yZCwgd2hpY2hcbiAgLy8gaGFzIGEgc3RhYmxlIHNoYXBlIGFuZCBzbyBob3BlZnVsbHkgc2hvdWxkIGJlIGNoZWFwIHRvIGFsbG9jYXRlLlxuICBmdW5jdGlvbiB0cnlDYXRjaChmbiwgb2JqLCBhcmcpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIHsgdHlwZTogXCJub3JtYWxcIiwgYXJnOiBmbi5jYWxsKG9iaiwgYXJnKSB9O1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgcmV0dXJuIHsgdHlwZTogXCJ0aHJvd1wiLCBhcmc6IGVyciB9O1xuICAgIH1cbiAgfVxuXG4gIHZhciBHZW5TdGF0ZVN1c3BlbmRlZFN0YXJ0ID0gXCJzdXNwZW5kZWRTdGFydFwiO1xuICB2YXIgR2VuU3RhdGVTdXNwZW5kZWRZaWVsZCA9IFwic3VzcGVuZGVkWWllbGRcIjtcbiAgdmFyIEdlblN0YXRlRXhlY3V0aW5nID0gXCJleGVjdXRpbmdcIjtcbiAgdmFyIEdlblN0YXRlQ29tcGxldGVkID0gXCJjb21wbGV0ZWRcIjtcblxuICAvLyBSZXR1cm5pbmcgdGhpcyBvYmplY3QgZnJvbSB0aGUgaW5uZXJGbiBoYXMgdGhlIHNhbWUgZWZmZWN0IGFzXG4gIC8vIGJyZWFraW5nIG91dCBvZiB0aGUgZGlzcGF0Y2ggc3dpdGNoIHN0YXRlbWVudC5cbiAgdmFyIENvbnRpbnVlU2VudGluZWwgPSB7fTtcblxuICAvLyBEdW1teSBjb25zdHJ1Y3RvciBmdW5jdGlvbnMgdGhhdCB3ZSB1c2UgYXMgdGhlIC5jb25zdHJ1Y3RvciBhbmRcbiAgLy8gLmNvbnN0cnVjdG9yLnByb3RvdHlwZSBwcm9wZXJ0aWVzIGZvciBmdW5jdGlvbnMgdGhhdCByZXR1cm4gR2VuZXJhdG9yXG4gIC8vIG9iamVjdHMuIEZvciBmdWxsIHNwZWMgY29tcGxpYW5jZSwgeW91IG1heSB3aXNoIHRvIGNvbmZpZ3VyZSB5b3VyXG4gIC8vIG1pbmlmaWVyIG5vdCB0byBtYW5nbGUgdGhlIG5hbWVzIG9mIHRoZXNlIHR3byBmdW5jdGlvbnMuXG4gIGZ1bmN0aW9uIEdlbmVyYXRvcigpIHt9XG4gIGZ1bmN0aW9uIEdlbmVyYXRvckZ1bmN0aW9uKCkge31cbiAgZnVuY3Rpb24gR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUoKSB7fVxuXG4gIC8vIFRoaXMgaXMgYSBwb2x5ZmlsbCBmb3IgJUl0ZXJhdG9yUHJvdG90eXBlJSBmb3IgZW52aXJvbm1lbnRzIHRoYXRcbiAgLy8gZG9uJ3QgbmF0aXZlbHkgc3VwcG9ydCBpdC5cbiAgdmFyIEl0ZXJhdG9yUHJvdG90eXBlID0ge307XG4gIGRlZmluZShJdGVyYXRvclByb3RvdHlwZSwgaXRlcmF0b3JTeW1ib2wsIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfSk7XG5cbiAgdmFyIGdldFByb3RvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mO1xuICB2YXIgTmF0aXZlSXRlcmF0b3JQcm90b3R5cGUgPSBnZXRQcm90byAmJiBnZXRQcm90byhnZXRQcm90byh2YWx1ZXMoW10pKSk7XG4gIGlmIChOYXRpdmVJdGVyYXRvclByb3RvdHlwZSAmJlxuICAgICAgTmF0aXZlSXRlcmF0b3JQcm90b3R5cGUgIT09IE9wICYmXG4gICAgICBoYXNPd24uY2FsbChOYXRpdmVJdGVyYXRvclByb3RvdHlwZSwgaXRlcmF0b3JTeW1ib2wpKSB7XG4gICAgLy8gVGhpcyBlbnZpcm9ubWVudCBoYXMgYSBuYXRpdmUgJUl0ZXJhdG9yUHJvdG90eXBlJTsgdXNlIGl0IGluc3RlYWRcbiAgICAvLyBvZiB0aGUgcG9seWZpbGwuXG4gICAgSXRlcmF0b3JQcm90b3R5cGUgPSBOYXRpdmVJdGVyYXRvclByb3RvdHlwZTtcbiAgfVxuXG4gIHZhciBHcCA9IEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlLnByb3RvdHlwZSA9XG4gICAgR2VuZXJhdG9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoSXRlcmF0b3JQcm90b3R5cGUpO1xuICBHZW5lcmF0b3JGdW5jdGlvbi5wcm90b3R5cGUgPSBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZTtcbiAgZGVmaW5lKEdwLCBcImNvbnN0cnVjdG9yXCIsIEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlKTtcbiAgZGVmaW5lKEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlLCBcImNvbnN0cnVjdG9yXCIsIEdlbmVyYXRvckZ1bmN0aW9uKTtcbiAgR2VuZXJhdG9yRnVuY3Rpb24uZGlzcGxheU5hbWUgPSBkZWZpbmUoXG4gICAgR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUsXG4gICAgdG9TdHJpbmdUYWdTeW1ib2wsXG4gICAgXCJHZW5lcmF0b3JGdW5jdGlvblwiXG4gICk7XG5cbiAgLy8gSGVscGVyIGZvciBkZWZpbmluZyB0aGUgLm5leHQsIC50aHJvdywgYW5kIC5yZXR1cm4gbWV0aG9kcyBvZiB0aGVcbiAgLy8gSXRlcmF0b3IgaW50ZXJmYWNlIGluIHRlcm1zIG9mIGEgc2luZ2xlIC5faW52b2tlIG1ldGhvZC5cbiAgZnVuY3Rpb24gZGVmaW5lSXRlcmF0b3JNZXRob2RzKHByb3RvdHlwZSkge1xuICAgIFtcIm5leHRcIiwgXCJ0aHJvd1wiLCBcInJldHVyblwiXS5mb3JFYWNoKGZ1bmN0aW9uKG1ldGhvZCkge1xuICAgICAgZGVmaW5lKHByb3RvdHlwZSwgbWV0aG9kLCBmdW5jdGlvbihhcmcpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ludm9rZShtZXRob2QsIGFyZyk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGV4cG9ydHMuaXNHZW5lcmF0b3JGdW5jdGlvbiA9IGZ1bmN0aW9uKGdlbkZ1bikge1xuICAgIHZhciBjdG9yID0gdHlwZW9mIGdlbkZ1biA9PT0gXCJmdW5jdGlvblwiICYmIGdlbkZ1bi5jb25zdHJ1Y3RvcjtcbiAgICByZXR1cm4gY3RvclxuICAgICAgPyBjdG9yID09PSBHZW5lcmF0b3JGdW5jdGlvbiB8fFxuICAgICAgICAvLyBGb3IgdGhlIG5hdGl2ZSBHZW5lcmF0b3JGdW5jdGlvbiBjb25zdHJ1Y3RvciwgdGhlIGJlc3Qgd2UgY2FuXG4gICAgICAgIC8vIGRvIGlzIHRvIGNoZWNrIGl0cyAubmFtZSBwcm9wZXJ0eS5cbiAgICAgICAgKGN0b3IuZGlzcGxheU5hbWUgfHwgY3Rvci5uYW1lKSA9PT0gXCJHZW5lcmF0b3JGdW5jdGlvblwiXG4gICAgICA6IGZhbHNlO1xuICB9O1xuXG4gIGV4cG9ydHMubWFyayA9IGZ1bmN0aW9uKGdlbkZ1bikge1xuICAgIGlmIChPYmplY3Quc2V0UHJvdG90eXBlT2YpIHtcbiAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihnZW5GdW4sIEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZ2VuRnVuLl9fcHJvdG9fXyA9IEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlO1xuICAgICAgZGVmaW5lKGdlbkZ1biwgdG9TdHJpbmdUYWdTeW1ib2wsIFwiR2VuZXJhdG9yRnVuY3Rpb25cIik7XG4gICAgfVxuICAgIGdlbkZ1bi5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEdwKTtcbiAgICByZXR1cm4gZ2VuRnVuO1xuICB9O1xuXG4gIC8vIFdpdGhpbiB0aGUgYm9keSBvZiBhbnkgYXN5bmMgZnVuY3Rpb24sIGBhd2FpdCB4YCBpcyB0cmFuc2Zvcm1lZCB0b1xuICAvLyBgeWllbGQgcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHgpYCwgc28gdGhhdCB0aGUgcnVudGltZSBjYW4gdGVzdFxuICAvLyBgaGFzT3duLmNhbGwodmFsdWUsIFwiX19hd2FpdFwiKWAgdG8gZGV0ZXJtaW5lIGlmIHRoZSB5aWVsZGVkIHZhbHVlIGlzXG4gIC8vIG1lYW50IHRvIGJlIGF3YWl0ZWQuXG4gIGV4cG9ydHMuYXdyYXAgPSBmdW5jdGlvbihhcmcpIHtcbiAgICByZXR1cm4geyBfX2F3YWl0OiBhcmcgfTtcbiAgfTtcblxuICBmdW5jdGlvbiBBc3luY0l0ZXJhdG9yKGdlbmVyYXRvciwgUHJvbWlzZUltcGwpIHtcbiAgICBmdW5jdGlvbiBpbnZva2UobWV0aG9kLCBhcmcsIHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgdmFyIHJlY29yZCA9IHRyeUNhdGNoKGdlbmVyYXRvclttZXRob2RdLCBnZW5lcmF0b3IsIGFyZyk7XG4gICAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICByZWplY3QocmVjb3JkLmFyZyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgcmVzdWx0ID0gcmVjb3JkLmFyZztcbiAgICAgICAgdmFyIHZhbHVlID0gcmVzdWx0LnZhbHVlO1xuICAgICAgICBpZiAodmFsdWUgJiZcbiAgICAgICAgICAgIHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICAgICAgaGFzT3duLmNhbGwodmFsdWUsIFwiX19hd2FpdFwiKSkge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlSW1wbC5yZXNvbHZlKHZhbHVlLl9fYXdhaXQpLnRoZW4oZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgIGludm9rZShcIm5leHRcIiwgdmFsdWUsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICBpbnZva2UoXCJ0aHJvd1wiLCBlcnIsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gUHJvbWlzZUltcGwucmVzb2x2ZSh2YWx1ZSkudGhlbihmdW5jdGlvbih1bndyYXBwZWQpIHtcbiAgICAgICAgICAvLyBXaGVuIGEgeWllbGRlZCBQcm9taXNlIGlzIHJlc29sdmVkLCBpdHMgZmluYWwgdmFsdWUgYmVjb21lc1xuICAgICAgICAgIC8vIHRoZSAudmFsdWUgb2YgdGhlIFByb21pc2U8e3ZhbHVlLGRvbmV9PiByZXN1bHQgZm9yIHRoZVxuICAgICAgICAgIC8vIGN1cnJlbnQgaXRlcmF0aW9uLlxuICAgICAgICAgIHJlc3VsdC52YWx1ZSA9IHVud3JhcHBlZDtcbiAgICAgICAgICByZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgIH0sIGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgICAgLy8gSWYgYSByZWplY3RlZCBQcm9taXNlIHdhcyB5aWVsZGVkLCB0aHJvdyB0aGUgcmVqZWN0aW9uIGJhY2tcbiAgICAgICAgICAvLyBpbnRvIHRoZSBhc3luYyBnZW5lcmF0b3IgZnVuY3Rpb24gc28gaXQgY2FuIGJlIGhhbmRsZWQgdGhlcmUuXG4gICAgICAgICAgcmV0dXJuIGludm9rZShcInRocm93XCIsIGVycm9yLCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgcHJldmlvdXNQcm9taXNlO1xuXG4gICAgZnVuY3Rpb24gZW5xdWV1ZShtZXRob2QsIGFyZykge1xuICAgICAgZnVuY3Rpb24gY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmcoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZUltcGwoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgaW52b2tlKG1ldGhvZCwgYXJnLCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHByZXZpb3VzUHJvbWlzZSA9XG4gICAgICAgIC8vIElmIGVucXVldWUgaGFzIGJlZW4gY2FsbGVkIGJlZm9yZSwgdGhlbiB3ZSB3YW50IHRvIHdhaXQgdW50aWxcbiAgICAgICAgLy8gYWxsIHByZXZpb3VzIFByb21pc2VzIGhhdmUgYmVlbiByZXNvbHZlZCBiZWZvcmUgY2FsbGluZyBpbnZva2UsXG4gICAgICAgIC8vIHNvIHRoYXQgcmVzdWx0cyBhcmUgYWx3YXlzIGRlbGl2ZXJlZCBpbiB0aGUgY29ycmVjdCBvcmRlci4gSWZcbiAgICAgICAgLy8gZW5xdWV1ZSBoYXMgbm90IGJlZW4gY2FsbGVkIGJlZm9yZSwgdGhlbiBpdCBpcyBpbXBvcnRhbnQgdG9cbiAgICAgICAgLy8gY2FsbCBpbnZva2UgaW1tZWRpYXRlbHksIHdpdGhvdXQgd2FpdGluZyBvbiBhIGNhbGxiYWNrIHRvIGZpcmUsXG4gICAgICAgIC8vIHNvIHRoYXQgdGhlIGFzeW5jIGdlbmVyYXRvciBmdW5jdGlvbiBoYXMgdGhlIG9wcG9ydHVuaXR5IHRvIGRvXG4gICAgICAgIC8vIGFueSBuZWNlc3Nhcnkgc2V0dXAgaW4gYSBwcmVkaWN0YWJsZSB3YXkuIFRoaXMgcHJlZGljdGFiaWxpdHlcbiAgICAgICAgLy8gaXMgd2h5IHRoZSBQcm9taXNlIGNvbnN0cnVjdG9yIHN5bmNocm9ub3VzbHkgaW52b2tlcyBpdHNcbiAgICAgICAgLy8gZXhlY3V0b3IgY2FsbGJhY2ssIGFuZCB3aHkgYXN5bmMgZnVuY3Rpb25zIHN5bmNocm9ub3VzbHlcbiAgICAgICAgLy8gZXhlY3V0ZSBjb2RlIGJlZm9yZSB0aGUgZmlyc3QgYXdhaXQuIFNpbmNlIHdlIGltcGxlbWVudCBzaW1wbGVcbiAgICAgICAgLy8gYXN5bmMgZnVuY3Rpb25zIGluIHRlcm1zIG9mIGFzeW5jIGdlbmVyYXRvcnMsIGl0IGlzIGVzcGVjaWFsbHlcbiAgICAgICAgLy8gaW1wb3J0YW50IHRvIGdldCB0aGlzIHJpZ2h0LCBldmVuIHRob3VnaCBpdCByZXF1aXJlcyBjYXJlLlxuICAgICAgICBwcmV2aW91c1Byb21pc2UgPyBwcmV2aW91c1Byb21pc2UudGhlbihcbiAgICAgICAgICBjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZyxcbiAgICAgICAgICAvLyBBdm9pZCBwcm9wYWdhdGluZyBmYWlsdXJlcyB0byBQcm9taXNlcyByZXR1cm5lZCBieSBsYXRlclxuICAgICAgICAgIC8vIGludm9jYXRpb25zIG9mIHRoZSBpdGVyYXRvci5cbiAgICAgICAgICBjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZ1xuICAgICAgICApIDogY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmcoKTtcbiAgICB9XG5cbiAgICAvLyBEZWZpbmUgdGhlIHVuaWZpZWQgaGVscGVyIG1ldGhvZCB0aGF0IGlzIHVzZWQgdG8gaW1wbGVtZW50IC5uZXh0LFxuICAgIC8vIC50aHJvdywgYW5kIC5yZXR1cm4gKHNlZSBkZWZpbmVJdGVyYXRvck1ldGhvZHMpLlxuICAgIHRoaXMuX2ludm9rZSA9IGVucXVldWU7XG4gIH1cblxuICBkZWZpbmVJdGVyYXRvck1ldGhvZHMoQXN5bmNJdGVyYXRvci5wcm90b3R5cGUpO1xuICBkZWZpbmUoQXN5bmNJdGVyYXRvci5wcm90b3R5cGUsIGFzeW5jSXRlcmF0b3JTeW1ib2wsIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfSk7XG4gIGV4cG9ydHMuQXN5bmNJdGVyYXRvciA9IEFzeW5jSXRlcmF0b3I7XG5cbiAgLy8gTm90ZSB0aGF0IHNpbXBsZSBhc3luYyBmdW5jdGlvbnMgYXJlIGltcGxlbWVudGVkIG9uIHRvcCBvZlxuICAvLyBBc3luY0l0ZXJhdG9yIG9iamVjdHM7IHRoZXkganVzdCByZXR1cm4gYSBQcm9taXNlIGZvciB0aGUgdmFsdWUgb2ZcbiAgLy8gdGhlIGZpbmFsIHJlc3VsdCBwcm9kdWNlZCBieSB0aGUgaXRlcmF0b3IuXG4gIGV4cG9ydHMuYXN5bmMgPSBmdW5jdGlvbihpbm5lckZuLCBvdXRlckZuLCBzZWxmLCB0cnlMb2NzTGlzdCwgUHJvbWlzZUltcGwpIHtcbiAgICBpZiAoUHJvbWlzZUltcGwgPT09IHZvaWQgMCkgUHJvbWlzZUltcGwgPSBQcm9taXNlO1xuXG4gICAgdmFyIGl0ZXIgPSBuZXcgQXN5bmNJdGVyYXRvcihcbiAgICAgIHdyYXAoaW5uZXJGbiwgb3V0ZXJGbiwgc2VsZiwgdHJ5TG9jc0xpc3QpLFxuICAgICAgUHJvbWlzZUltcGxcbiAgICApO1xuXG4gICAgcmV0dXJuIGV4cG9ydHMuaXNHZW5lcmF0b3JGdW5jdGlvbihvdXRlckZuKVxuICAgICAgPyBpdGVyIC8vIElmIG91dGVyRm4gaXMgYSBnZW5lcmF0b3IsIHJldHVybiB0aGUgZnVsbCBpdGVyYXRvci5cbiAgICAgIDogaXRlci5uZXh0KCkudGhlbihmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICByZXR1cm4gcmVzdWx0LmRvbmUgPyByZXN1bHQudmFsdWUgOiBpdGVyLm5leHQoKTtcbiAgICAgICAgfSk7XG4gIH07XG5cbiAgZnVuY3Rpb24gbWFrZUludm9rZU1ldGhvZChpbm5lckZuLCBzZWxmLCBjb250ZXh0KSB7XG4gICAgdmFyIHN0YXRlID0gR2VuU3RhdGVTdXNwZW5kZWRTdGFydDtcblxuICAgIHJldHVybiBmdW5jdGlvbiBpbnZva2UobWV0aG9kLCBhcmcpIHtcbiAgICAgIGlmIChzdGF0ZSA9PT0gR2VuU3RhdGVFeGVjdXRpbmcpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgcnVubmluZ1wiKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHN0YXRlID09PSBHZW5TdGF0ZUNvbXBsZXRlZCkge1xuICAgICAgICBpZiAobWV0aG9kID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICB0aHJvdyBhcmc7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBCZSBmb3JnaXZpbmcsIHBlciAyNS4zLjMuMy4zIG9mIHRoZSBzcGVjOlxuICAgICAgICAvLyBodHRwczovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtZ2VuZXJhdG9ycmVzdW1lXG4gICAgICAgIHJldHVybiBkb25lUmVzdWx0KCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnRleHQubWV0aG9kID0gbWV0aG9kO1xuICAgICAgY29udGV4dC5hcmcgPSBhcmc7XG5cbiAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIHZhciBkZWxlZ2F0ZSA9IGNvbnRleHQuZGVsZWdhdGU7XG4gICAgICAgIGlmIChkZWxlZ2F0ZSkge1xuICAgICAgICAgIHZhciBkZWxlZ2F0ZVJlc3VsdCA9IG1heWJlSW52b2tlRGVsZWdhdGUoZGVsZWdhdGUsIGNvbnRleHQpO1xuICAgICAgICAgIGlmIChkZWxlZ2F0ZVJlc3VsdCkge1xuICAgICAgICAgICAgaWYgKGRlbGVnYXRlUmVzdWx0ID09PSBDb250aW51ZVNlbnRpbmVsKSBjb250aW51ZTtcbiAgICAgICAgICAgIHJldHVybiBkZWxlZ2F0ZVJlc3VsdDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY29udGV4dC5tZXRob2QgPT09IFwibmV4dFwiKSB7XG4gICAgICAgICAgLy8gU2V0dGluZyBjb250ZXh0Ll9zZW50IGZvciBsZWdhY3kgc3VwcG9ydCBvZiBCYWJlbCdzXG4gICAgICAgICAgLy8gZnVuY3Rpb24uc2VudCBpbXBsZW1lbnRhdGlvbi5cbiAgICAgICAgICBjb250ZXh0LnNlbnQgPSBjb250ZXh0Ll9zZW50ID0gY29udGV4dC5hcmc7XG5cbiAgICAgICAgfSBlbHNlIGlmIChjb250ZXh0Lm1ldGhvZCA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgaWYgKHN0YXRlID09PSBHZW5TdGF0ZVN1c3BlbmRlZFN0YXJ0KSB7XG4gICAgICAgICAgICBzdGF0ZSA9IEdlblN0YXRlQ29tcGxldGVkO1xuICAgICAgICAgICAgdGhyb3cgY29udGV4dC5hcmc7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29udGV4dC5kaXNwYXRjaEV4Y2VwdGlvbihjb250ZXh0LmFyZyk7XG5cbiAgICAgICAgfSBlbHNlIGlmIChjb250ZXh0Lm1ldGhvZCA9PT0gXCJyZXR1cm5cIikge1xuICAgICAgICAgIGNvbnRleHQuYWJydXB0KFwicmV0dXJuXCIsIGNvbnRleHQuYXJnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHN0YXRlID0gR2VuU3RhdGVFeGVjdXRpbmc7XG5cbiAgICAgICAgdmFyIHJlY29yZCA9IHRyeUNhdGNoKGlubmVyRm4sIHNlbGYsIGNvbnRleHQpO1xuICAgICAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwibm9ybWFsXCIpIHtcbiAgICAgICAgICAvLyBJZiBhbiBleGNlcHRpb24gaXMgdGhyb3duIGZyb20gaW5uZXJGbiwgd2UgbGVhdmUgc3RhdGUgPT09XG4gICAgICAgICAgLy8gR2VuU3RhdGVFeGVjdXRpbmcgYW5kIGxvb3AgYmFjayBmb3IgYW5vdGhlciBpbnZvY2F0aW9uLlxuICAgICAgICAgIHN0YXRlID0gY29udGV4dC5kb25lXG4gICAgICAgICAgICA/IEdlblN0YXRlQ29tcGxldGVkXG4gICAgICAgICAgICA6IEdlblN0YXRlU3VzcGVuZGVkWWllbGQ7XG5cbiAgICAgICAgICBpZiAocmVjb3JkLmFyZyA9PT0gQ29udGludWVTZW50aW5lbCkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHZhbHVlOiByZWNvcmQuYXJnLFxuICAgICAgICAgICAgZG9uZTogY29udGV4dC5kb25lXG4gICAgICAgICAgfTtcblxuICAgICAgICB9IGVsc2UgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICBzdGF0ZSA9IEdlblN0YXRlQ29tcGxldGVkO1xuICAgICAgICAgIC8vIERpc3BhdGNoIHRoZSBleGNlcHRpb24gYnkgbG9vcGluZyBiYWNrIGFyb3VuZCB0byB0aGVcbiAgICAgICAgICAvLyBjb250ZXh0LmRpc3BhdGNoRXhjZXB0aW9uKGNvbnRleHQuYXJnKSBjYWxsIGFib3ZlLlxuICAgICAgICAgIGNvbnRleHQubWV0aG9kID0gXCJ0aHJvd1wiO1xuICAgICAgICAgIGNvbnRleHQuYXJnID0gcmVjb3JkLmFyZztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH1cblxuICAvLyBDYWxsIGRlbGVnYXRlLml0ZXJhdG9yW2NvbnRleHQubWV0aG9kXShjb250ZXh0LmFyZykgYW5kIGhhbmRsZSB0aGVcbiAgLy8gcmVzdWx0LCBlaXRoZXIgYnkgcmV0dXJuaW5nIGEgeyB2YWx1ZSwgZG9uZSB9IHJlc3VsdCBmcm9tIHRoZVxuICAvLyBkZWxlZ2F0ZSBpdGVyYXRvciwgb3IgYnkgbW9kaWZ5aW5nIGNvbnRleHQubWV0aG9kIGFuZCBjb250ZXh0LmFyZyxcbiAgLy8gc2V0dGluZyBjb250ZXh0LmRlbGVnYXRlIHRvIG51bGwsIGFuZCByZXR1cm5pbmcgdGhlIENvbnRpbnVlU2VudGluZWwuXG4gIGZ1bmN0aW9uIG1heWJlSW52b2tlRGVsZWdhdGUoZGVsZWdhdGUsIGNvbnRleHQpIHtcbiAgICB2YXIgbWV0aG9kID0gZGVsZWdhdGUuaXRlcmF0b3JbY29udGV4dC5tZXRob2RdO1xuICAgIGlmIChtZXRob2QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgLy8gQSAudGhyb3cgb3IgLnJldHVybiB3aGVuIHRoZSBkZWxlZ2F0ZSBpdGVyYXRvciBoYXMgbm8gLnRocm93XG4gICAgICAvLyBtZXRob2QgYWx3YXlzIHRlcm1pbmF0ZXMgdGhlIHlpZWxkKiBsb29wLlxuICAgICAgY29udGV4dC5kZWxlZ2F0ZSA9IG51bGw7XG5cbiAgICAgIGlmIChjb250ZXh0Lm1ldGhvZCA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgIC8vIE5vdGU6IFtcInJldHVyblwiXSBtdXN0IGJlIHVzZWQgZm9yIEVTMyBwYXJzaW5nIGNvbXBhdGliaWxpdHkuXG4gICAgICAgIGlmIChkZWxlZ2F0ZS5pdGVyYXRvcltcInJldHVyblwiXSkge1xuICAgICAgICAgIC8vIElmIHRoZSBkZWxlZ2F0ZSBpdGVyYXRvciBoYXMgYSByZXR1cm4gbWV0aG9kLCBnaXZlIGl0IGFcbiAgICAgICAgICAvLyBjaGFuY2UgdG8gY2xlYW4gdXAuXG4gICAgICAgICAgY29udGV4dC5tZXRob2QgPSBcInJldHVyblwiO1xuICAgICAgICAgIGNvbnRleHQuYXJnID0gdW5kZWZpbmVkO1xuICAgICAgICAgIG1heWJlSW52b2tlRGVsZWdhdGUoZGVsZWdhdGUsIGNvbnRleHQpO1xuXG4gICAgICAgICAgaWYgKGNvbnRleHQubWV0aG9kID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICAgIC8vIElmIG1heWJlSW52b2tlRGVsZWdhdGUoY29udGV4dCkgY2hhbmdlZCBjb250ZXh0Lm1ldGhvZCBmcm9tXG4gICAgICAgICAgICAvLyBcInJldHVyblwiIHRvIFwidGhyb3dcIiwgbGV0IHRoYXQgb3ZlcnJpZGUgdGhlIFR5cGVFcnJvciBiZWxvdy5cbiAgICAgICAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnRleHQubWV0aG9kID0gXCJ0aHJvd1wiO1xuICAgICAgICBjb250ZXh0LmFyZyA9IG5ldyBUeXBlRXJyb3IoXG4gICAgICAgICAgXCJUaGUgaXRlcmF0b3IgZG9lcyBub3QgcHJvdmlkZSBhICd0aHJvdycgbWV0aG9kXCIpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9XG5cbiAgICB2YXIgcmVjb3JkID0gdHJ5Q2F0Y2gobWV0aG9kLCBkZWxlZ2F0ZS5pdGVyYXRvciwgY29udGV4dC5hcmcpO1xuXG4gICAgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgIGNvbnRleHQubWV0aG9kID0gXCJ0aHJvd1wiO1xuICAgICAgY29udGV4dC5hcmcgPSByZWNvcmQuYXJnO1xuICAgICAgY29udGV4dC5kZWxlZ2F0ZSA9IG51bGw7XG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9XG5cbiAgICB2YXIgaW5mbyA9IHJlY29yZC5hcmc7XG5cbiAgICBpZiAoISBpbmZvKSB7XG4gICAgICBjb250ZXh0Lm1ldGhvZCA9IFwidGhyb3dcIjtcbiAgICAgIGNvbnRleHQuYXJnID0gbmV3IFR5cGVFcnJvcihcIml0ZXJhdG9yIHJlc3VsdCBpcyBub3QgYW4gb2JqZWN0XCIpO1xuICAgICAgY29udGV4dC5kZWxlZ2F0ZSA9IG51bGw7XG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9XG5cbiAgICBpZiAoaW5mby5kb25lKSB7XG4gICAgICAvLyBBc3NpZ24gdGhlIHJlc3VsdCBvZiB0aGUgZmluaXNoZWQgZGVsZWdhdGUgdG8gdGhlIHRlbXBvcmFyeVxuICAgICAgLy8gdmFyaWFibGUgc3BlY2lmaWVkIGJ5IGRlbGVnYXRlLnJlc3VsdE5hbWUgKHNlZSBkZWxlZ2F0ZVlpZWxkKS5cbiAgICAgIGNvbnRleHRbZGVsZWdhdGUucmVzdWx0TmFtZV0gPSBpbmZvLnZhbHVlO1xuXG4gICAgICAvLyBSZXN1bWUgZXhlY3V0aW9uIGF0IHRoZSBkZXNpcmVkIGxvY2F0aW9uIChzZWUgZGVsZWdhdGVZaWVsZCkuXG4gICAgICBjb250ZXh0Lm5leHQgPSBkZWxlZ2F0ZS5uZXh0TG9jO1xuXG4gICAgICAvLyBJZiBjb250ZXh0Lm1ldGhvZCB3YXMgXCJ0aHJvd1wiIGJ1dCB0aGUgZGVsZWdhdGUgaGFuZGxlZCB0aGVcbiAgICAgIC8vIGV4Y2VwdGlvbiwgbGV0IHRoZSBvdXRlciBnZW5lcmF0b3IgcHJvY2VlZCBub3JtYWxseS4gSWZcbiAgICAgIC8vIGNvbnRleHQubWV0aG9kIHdhcyBcIm5leHRcIiwgZm9yZ2V0IGNvbnRleHQuYXJnIHNpbmNlIGl0IGhhcyBiZWVuXG4gICAgICAvLyBcImNvbnN1bWVkXCIgYnkgdGhlIGRlbGVnYXRlIGl0ZXJhdG9yLiBJZiBjb250ZXh0Lm1ldGhvZCB3YXNcbiAgICAgIC8vIFwicmV0dXJuXCIsIGFsbG93IHRoZSBvcmlnaW5hbCAucmV0dXJuIGNhbGwgdG8gY29udGludWUgaW4gdGhlXG4gICAgICAvLyBvdXRlciBnZW5lcmF0b3IuXG4gICAgICBpZiAoY29udGV4dC5tZXRob2QgIT09IFwicmV0dXJuXCIpIHtcbiAgICAgICAgY29udGV4dC5tZXRob2QgPSBcIm5leHRcIjtcbiAgICAgICAgY29udGV4dC5hcmcgPSB1bmRlZmluZWQ7XG4gICAgICB9XG5cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gUmUteWllbGQgdGhlIHJlc3VsdCByZXR1cm5lZCBieSB0aGUgZGVsZWdhdGUgbWV0aG9kLlxuICAgICAgcmV0dXJuIGluZm87XG4gICAgfVxuXG4gICAgLy8gVGhlIGRlbGVnYXRlIGl0ZXJhdG9yIGlzIGZpbmlzaGVkLCBzbyBmb3JnZXQgaXQgYW5kIGNvbnRpbnVlIHdpdGhcbiAgICAvLyB0aGUgb3V0ZXIgZ2VuZXJhdG9yLlxuICAgIGNvbnRleHQuZGVsZWdhdGUgPSBudWxsO1xuICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICB9XG5cbiAgLy8gRGVmaW5lIEdlbmVyYXRvci5wcm90b3R5cGUue25leHQsdGhyb3cscmV0dXJufSBpbiB0ZXJtcyBvZiB0aGVcbiAgLy8gdW5pZmllZCAuX2ludm9rZSBoZWxwZXIgbWV0aG9kLlxuICBkZWZpbmVJdGVyYXRvck1ldGhvZHMoR3ApO1xuXG4gIGRlZmluZShHcCwgdG9TdHJpbmdUYWdTeW1ib2wsIFwiR2VuZXJhdG9yXCIpO1xuXG4gIC8vIEEgR2VuZXJhdG9yIHNob3VsZCBhbHdheXMgcmV0dXJuIGl0c2VsZiBhcyB0aGUgaXRlcmF0b3Igb2JqZWN0IHdoZW4gdGhlXG4gIC8vIEBAaXRlcmF0b3IgZnVuY3Rpb24gaXMgY2FsbGVkIG9uIGl0LiBTb21lIGJyb3dzZXJzJyBpbXBsZW1lbnRhdGlvbnMgb2YgdGhlXG4gIC8vIGl0ZXJhdG9yIHByb3RvdHlwZSBjaGFpbiBpbmNvcnJlY3RseSBpbXBsZW1lbnQgdGhpcywgY2F1c2luZyB0aGUgR2VuZXJhdG9yXG4gIC8vIG9iamVjdCB0byBub3QgYmUgcmV0dXJuZWQgZnJvbSB0aGlzIGNhbGwuIFRoaXMgZW5zdXJlcyB0aGF0IGRvZXNuJ3QgaGFwcGVuLlxuICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL3JlZ2VuZXJhdG9yL2lzc3Vlcy8yNzQgZm9yIG1vcmUgZGV0YWlscy5cbiAgZGVmaW5lKEdwLCBpdGVyYXRvclN5bWJvbCwgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH0pO1xuXG4gIGRlZmluZShHcCwgXCJ0b1N0cmluZ1wiLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gXCJbb2JqZWN0IEdlbmVyYXRvcl1cIjtcbiAgfSk7XG5cbiAgZnVuY3Rpb24gcHVzaFRyeUVudHJ5KGxvY3MpIHtcbiAgICB2YXIgZW50cnkgPSB7IHRyeUxvYzogbG9jc1swXSB9O1xuXG4gICAgaWYgKDEgaW4gbG9jcykge1xuICAgICAgZW50cnkuY2F0Y2hMb2MgPSBsb2NzWzFdO1xuICAgIH1cblxuICAgIGlmICgyIGluIGxvY3MpIHtcbiAgICAgIGVudHJ5LmZpbmFsbHlMb2MgPSBsb2NzWzJdO1xuICAgICAgZW50cnkuYWZ0ZXJMb2MgPSBsb2NzWzNdO1xuICAgIH1cblxuICAgIHRoaXMudHJ5RW50cmllcy5wdXNoKGVudHJ5KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlc2V0VHJ5RW50cnkoZW50cnkpIHtcbiAgICB2YXIgcmVjb3JkID0gZW50cnkuY29tcGxldGlvbiB8fCB7fTtcbiAgICByZWNvcmQudHlwZSA9IFwibm9ybWFsXCI7XG4gICAgZGVsZXRlIHJlY29yZC5hcmc7XG4gICAgZW50cnkuY29tcGxldGlvbiA9IHJlY29yZDtcbiAgfVxuXG4gIGZ1bmN0aW9uIENvbnRleHQodHJ5TG9jc0xpc3QpIHtcbiAgICAvLyBUaGUgcm9vdCBlbnRyeSBvYmplY3QgKGVmZmVjdGl2ZWx5IGEgdHJ5IHN0YXRlbWVudCB3aXRob3V0IGEgY2F0Y2hcbiAgICAvLyBvciBhIGZpbmFsbHkgYmxvY2spIGdpdmVzIHVzIGEgcGxhY2UgdG8gc3RvcmUgdmFsdWVzIHRocm93biBmcm9tXG4gICAgLy8gbG9jYXRpb25zIHdoZXJlIHRoZXJlIGlzIG5vIGVuY2xvc2luZyB0cnkgc3RhdGVtZW50LlxuICAgIHRoaXMudHJ5RW50cmllcyA9IFt7IHRyeUxvYzogXCJyb290XCIgfV07XG4gICAgdHJ5TG9jc0xpc3QuZm9yRWFjaChwdXNoVHJ5RW50cnksIHRoaXMpO1xuICAgIHRoaXMucmVzZXQodHJ1ZSk7XG4gIH1cblxuICBleHBvcnRzLmtleXMgPSBmdW5jdGlvbihvYmplY3QpIHtcbiAgICB2YXIga2V5cyA9IFtdO1xuICAgIGZvciAodmFyIGtleSBpbiBvYmplY3QpIHtcbiAgICAgIGtleXMucHVzaChrZXkpO1xuICAgIH1cbiAgICBrZXlzLnJldmVyc2UoKTtcblxuICAgIC8vIFJhdGhlciB0aGFuIHJldHVybmluZyBhbiBvYmplY3Qgd2l0aCBhIG5leHQgbWV0aG9kLCB3ZSBrZWVwXG4gICAgLy8gdGhpbmdzIHNpbXBsZSBhbmQgcmV0dXJuIHRoZSBuZXh0IGZ1bmN0aW9uIGl0c2VsZi5cbiAgICByZXR1cm4gZnVuY3Rpb24gbmV4dCgpIHtcbiAgICAgIHdoaWxlIChrZXlzLmxlbmd0aCkge1xuICAgICAgICB2YXIga2V5ID0ga2V5cy5wb3AoKTtcbiAgICAgICAgaWYgKGtleSBpbiBvYmplY3QpIHtcbiAgICAgICAgICBuZXh0LnZhbHVlID0ga2V5O1xuICAgICAgICAgIG5leHQuZG9uZSA9IGZhbHNlO1xuICAgICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFRvIGF2b2lkIGNyZWF0aW5nIGFuIGFkZGl0aW9uYWwgb2JqZWN0LCB3ZSBqdXN0IGhhbmcgdGhlIC52YWx1ZVxuICAgICAgLy8gYW5kIC5kb25lIHByb3BlcnRpZXMgb2ZmIHRoZSBuZXh0IGZ1bmN0aW9uIG9iamVjdCBpdHNlbGYuIFRoaXNcbiAgICAgIC8vIGFsc28gZW5zdXJlcyB0aGF0IHRoZSBtaW5pZmllciB3aWxsIG5vdCBhbm9ueW1pemUgdGhlIGZ1bmN0aW9uLlxuICAgICAgbmV4dC5kb25lID0gdHJ1ZTtcbiAgICAgIHJldHVybiBuZXh0O1xuICAgIH07XG4gIH07XG5cbiAgZnVuY3Rpb24gdmFsdWVzKGl0ZXJhYmxlKSB7XG4gICAgaWYgKGl0ZXJhYmxlKSB7XG4gICAgICB2YXIgaXRlcmF0b3JNZXRob2QgPSBpdGVyYWJsZVtpdGVyYXRvclN5bWJvbF07XG4gICAgICBpZiAoaXRlcmF0b3JNZXRob2QpIHtcbiAgICAgICAgcmV0dXJuIGl0ZXJhdG9yTWV0aG9kLmNhbGwoaXRlcmFibGUpO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIGl0ZXJhYmxlLm5leHQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICByZXR1cm4gaXRlcmFibGU7XG4gICAgICB9XG5cbiAgICAgIGlmICghaXNOYU4oaXRlcmFibGUubGVuZ3RoKSkge1xuICAgICAgICB2YXIgaSA9IC0xLCBuZXh0ID0gZnVuY3Rpb24gbmV4dCgpIHtcbiAgICAgICAgICB3aGlsZSAoKytpIDwgaXRlcmFibGUubGVuZ3RoKSB7XG4gICAgICAgICAgICBpZiAoaGFzT3duLmNhbGwoaXRlcmFibGUsIGkpKSB7XG4gICAgICAgICAgICAgIG5leHQudmFsdWUgPSBpdGVyYWJsZVtpXTtcbiAgICAgICAgICAgICAgbmV4dC5kb25lID0gZmFsc2U7XG4gICAgICAgICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIG5leHQudmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgbmV4dC5kb25lID0gdHJ1ZTtcblxuICAgICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBuZXh0Lm5leHQgPSBuZXh0O1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFJldHVybiBhbiBpdGVyYXRvciB3aXRoIG5vIHZhbHVlcy5cbiAgICByZXR1cm4geyBuZXh0OiBkb25lUmVzdWx0IH07XG4gIH1cbiAgZXhwb3J0cy52YWx1ZXMgPSB2YWx1ZXM7XG5cbiAgZnVuY3Rpb24gZG9uZVJlc3VsdCgpIHtcbiAgICByZXR1cm4geyB2YWx1ZTogdW5kZWZpbmVkLCBkb25lOiB0cnVlIH07XG4gIH1cblxuICBDb250ZXh0LnByb3RvdHlwZSA9IHtcbiAgICBjb25zdHJ1Y3RvcjogQ29udGV4dCxcblxuICAgIHJlc2V0OiBmdW5jdGlvbihza2lwVGVtcFJlc2V0KSB7XG4gICAgICB0aGlzLnByZXYgPSAwO1xuICAgICAgdGhpcy5uZXh0ID0gMDtcbiAgICAgIC8vIFJlc2V0dGluZyBjb250ZXh0Ll9zZW50IGZvciBsZWdhY3kgc3VwcG9ydCBvZiBCYWJlbCdzXG4gICAgICAvLyBmdW5jdGlvbi5zZW50IGltcGxlbWVudGF0aW9uLlxuICAgICAgdGhpcy5zZW50ID0gdGhpcy5fc2VudCA9IHVuZGVmaW5lZDtcbiAgICAgIHRoaXMuZG9uZSA9IGZhbHNlO1xuICAgICAgdGhpcy5kZWxlZ2F0ZSA9IG51bGw7XG5cbiAgICAgIHRoaXMubWV0aG9kID0gXCJuZXh0XCI7XG4gICAgICB0aGlzLmFyZyA9IHVuZGVmaW5lZDtcblxuICAgICAgdGhpcy50cnlFbnRyaWVzLmZvckVhY2gocmVzZXRUcnlFbnRyeSk7XG5cbiAgICAgIGlmICghc2tpcFRlbXBSZXNldCkge1xuICAgICAgICBmb3IgKHZhciBuYW1lIGluIHRoaXMpIHtcbiAgICAgICAgICAvLyBOb3Qgc3VyZSBhYm91dCB0aGUgb3B0aW1hbCBvcmRlciBvZiB0aGVzZSBjb25kaXRpb25zOlxuICAgICAgICAgIGlmIChuYW1lLmNoYXJBdCgwKSA9PT0gXCJ0XCIgJiZcbiAgICAgICAgICAgICAgaGFzT3duLmNhbGwodGhpcywgbmFtZSkgJiZcbiAgICAgICAgICAgICAgIWlzTmFOKCtuYW1lLnNsaWNlKDEpKSkge1xuICAgICAgICAgICAgdGhpc1tuYW1lXSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgc3RvcDogZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLmRvbmUgPSB0cnVlO1xuXG4gICAgICB2YXIgcm9vdEVudHJ5ID0gdGhpcy50cnlFbnRyaWVzWzBdO1xuICAgICAgdmFyIHJvb3RSZWNvcmQgPSByb290RW50cnkuY29tcGxldGlvbjtcbiAgICAgIGlmIChyb290UmVjb3JkLnR5cGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICB0aHJvdyByb290UmVjb3JkLmFyZztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMucnZhbDtcbiAgICB9LFxuXG4gICAgZGlzcGF0Y2hFeGNlcHRpb246IGZ1bmN0aW9uKGV4Y2VwdGlvbikge1xuICAgICAgaWYgKHRoaXMuZG9uZSkge1xuICAgICAgICB0aHJvdyBleGNlcHRpb247XG4gICAgICB9XG5cbiAgICAgIHZhciBjb250ZXh0ID0gdGhpcztcbiAgICAgIGZ1bmN0aW9uIGhhbmRsZShsb2MsIGNhdWdodCkge1xuICAgICAgICByZWNvcmQudHlwZSA9IFwidGhyb3dcIjtcbiAgICAgICAgcmVjb3JkLmFyZyA9IGV4Y2VwdGlvbjtcbiAgICAgICAgY29udGV4dC5uZXh0ID0gbG9jO1xuXG4gICAgICAgIGlmIChjYXVnaHQpIHtcbiAgICAgICAgICAvLyBJZiB0aGUgZGlzcGF0Y2hlZCBleGNlcHRpb24gd2FzIGNhdWdodCBieSBhIGNhdGNoIGJsb2NrLFxuICAgICAgICAgIC8vIHRoZW4gbGV0IHRoYXQgY2F0Y2ggYmxvY2sgaGFuZGxlIHRoZSBleGNlcHRpb24gbm9ybWFsbHkuXG4gICAgICAgICAgY29udGV4dC5tZXRob2QgPSBcIm5leHRcIjtcbiAgICAgICAgICBjb250ZXh0LmFyZyA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAhISBjYXVnaHQ7XG4gICAgICB9XG5cbiAgICAgIGZvciAodmFyIGkgPSB0aGlzLnRyeUVudHJpZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy50cnlFbnRyaWVzW2ldO1xuICAgICAgICB2YXIgcmVjb3JkID0gZW50cnkuY29tcGxldGlvbjtcblxuICAgICAgICBpZiAoZW50cnkudHJ5TG9jID09PSBcInJvb3RcIikge1xuICAgICAgICAgIC8vIEV4Y2VwdGlvbiB0aHJvd24gb3V0c2lkZSBvZiBhbnkgdHJ5IGJsb2NrIHRoYXQgY291bGQgaGFuZGxlXG4gICAgICAgICAgLy8gaXQsIHNvIHNldCB0aGUgY29tcGxldGlvbiB2YWx1ZSBvZiB0aGUgZW50aXJlIGZ1bmN0aW9uIHRvXG4gICAgICAgICAgLy8gdGhyb3cgdGhlIGV4Y2VwdGlvbi5cbiAgICAgICAgICByZXR1cm4gaGFuZGxlKFwiZW5kXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGVudHJ5LnRyeUxvYyA8PSB0aGlzLnByZXYpIHtcbiAgICAgICAgICB2YXIgaGFzQ2F0Y2ggPSBoYXNPd24uY2FsbChlbnRyeSwgXCJjYXRjaExvY1wiKTtcbiAgICAgICAgICB2YXIgaGFzRmluYWxseSA9IGhhc093bi5jYWxsKGVudHJ5LCBcImZpbmFsbHlMb2NcIik7XG5cbiAgICAgICAgICBpZiAoaGFzQ2F0Y2ggJiYgaGFzRmluYWxseSkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJldiA8IGVudHJ5LmNhdGNoTG9jKSB7XG4gICAgICAgICAgICAgIHJldHVybiBoYW5kbGUoZW50cnkuY2F0Y2hMb2MsIHRydWUpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnByZXYgPCBlbnRyeS5maW5hbGx5TG9jKSB7XG4gICAgICAgICAgICAgIHJldHVybiBoYW5kbGUoZW50cnkuZmluYWxseUxvYyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICB9IGVsc2UgaWYgKGhhc0NhdGNoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcmV2IDwgZW50cnkuY2F0Y2hMb2MpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZShlbnRyeS5jYXRjaExvYywgdHJ1ZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICB9IGVsc2UgaWYgKGhhc0ZpbmFsbHkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXYgPCBlbnRyeS5maW5hbGx5TG9jKSB7XG4gICAgICAgICAgICAgIHJldHVybiBoYW5kbGUoZW50cnkuZmluYWxseUxvYyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwidHJ5IHN0YXRlbWVudCB3aXRob3V0IGNhdGNoIG9yIGZpbmFsbHlcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIGFicnVwdDogZnVuY3Rpb24odHlwZSwgYXJnKSB7XG4gICAgICBmb3IgKHZhciBpID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMudHJ5RW50cmllc1tpXTtcbiAgICAgICAgaWYgKGVudHJ5LnRyeUxvYyA8PSB0aGlzLnByZXYgJiZcbiAgICAgICAgICAgIGhhc093bi5jYWxsKGVudHJ5LCBcImZpbmFsbHlMb2NcIikgJiZcbiAgICAgICAgICAgIHRoaXMucHJldiA8IGVudHJ5LmZpbmFsbHlMb2MpIHtcbiAgICAgICAgICB2YXIgZmluYWxseUVudHJ5ID0gZW50cnk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGZpbmFsbHlFbnRyeSAmJlxuICAgICAgICAgICh0eXBlID09PSBcImJyZWFrXCIgfHxcbiAgICAgICAgICAgdHlwZSA9PT0gXCJjb250aW51ZVwiKSAmJlxuICAgICAgICAgIGZpbmFsbHlFbnRyeS50cnlMb2MgPD0gYXJnICYmXG4gICAgICAgICAgYXJnIDw9IGZpbmFsbHlFbnRyeS5maW5hbGx5TG9jKSB7XG4gICAgICAgIC8vIElnbm9yZSB0aGUgZmluYWxseSBlbnRyeSBpZiBjb250cm9sIGlzIG5vdCBqdW1waW5nIHRvIGFcbiAgICAgICAgLy8gbG9jYXRpb24gb3V0c2lkZSB0aGUgdHJ5L2NhdGNoIGJsb2NrLlxuICAgICAgICBmaW5hbGx5RW50cnkgPSBudWxsO1xuICAgICAgfVxuXG4gICAgICB2YXIgcmVjb3JkID0gZmluYWxseUVudHJ5ID8gZmluYWxseUVudHJ5LmNvbXBsZXRpb24gOiB7fTtcbiAgICAgIHJlY29yZC50eXBlID0gdHlwZTtcbiAgICAgIHJlY29yZC5hcmcgPSBhcmc7XG5cbiAgICAgIGlmIChmaW5hbGx5RW50cnkpIHtcbiAgICAgICAgdGhpcy5tZXRob2QgPSBcIm5leHRcIjtcbiAgICAgICAgdGhpcy5uZXh0ID0gZmluYWxseUVudHJ5LmZpbmFsbHlMb2M7XG4gICAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5jb21wbGV0ZShyZWNvcmQpO1xuICAgIH0sXG5cbiAgICBjb21wbGV0ZTogZnVuY3Rpb24ocmVjb3JkLCBhZnRlckxvYykge1xuICAgICAgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgdGhyb3cgcmVjb3JkLmFyZztcbiAgICAgIH1cblxuICAgICAgaWYgKHJlY29yZC50eXBlID09PSBcImJyZWFrXCIgfHxcbiAgICAgICAgICByZWNvcmQudHlwZSA9PT0gXCJjb250aW51ZVwiKSB7XG4gICAgICAgIHRoaXMubmV4dCA9IHJlY29yZC5hcmc7XG4gICAgICB9IGVsc2UgaWYgKHJlY29yZC50eXBlID09PSBcInJldHVyblwiKSB7XG4gICAgICAgIHRoaXMucnZhbCA9IHRoaXMuYXJnID0gcmVjb3JkLmFyZztcbiAgICAgICAgdGhpcy5tZXRob2QgPSBcInJldHVyblwiO1xuICAgICAgICB0aGlzLm5leHQgPSBcImVuZFwiO1xuICAgICAgfSBlbHNlIGlmIChyZWNvcmQudHlwZSA9PT0gXCJub3JtYWxcIiAmJiBhZnRlckxvYykge1xuICAgICAgICB0aGlzLm5leHQgPSBhZnRlckxvYztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgfSxcblxuICAgIGZpbmlzaDogZnVuY3Rpb24oZmluYWxseUxvYykge1xuICAgICAgZm9yICh2YXIgaSA9IHRoaXMudHJ5RW50cmllcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICB2YXIgZW50cnkgPSB0aGlzLnRyeUVudHJpZXNbaV07XG4gICAgICAgIGlmIChlbnRyeS5maW5hbGx5TG9jID09PSBmaW5hbGx5TG9jKSB7XG4gICAgICAgICAgdGhpcy5jb21wbGV0ZShlbnRyeS5jb21wbGV0aW9uLCBlbnRyeS5hZnRlckxvYyk7XG4gICAgICAgICAgcmVzZXRUcnlFbnRyeShlbnRyeSk7XG4gICAgICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgXCJjYXRjaFwiOiBmdW5jdGlvbih0cnlMb2MpIHtcbiAgICAgIGZvciAodmFyIGkgPSB0aGlzLnRyeUVudHJpZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy50cnlFbnRyaWVzW2ldO1xuICAgICAgICBpZiAoZW50cnkudHJ5TG9jID09PSB0cnlMb2MpIHtcbiAgICAgICAgICB2YXIgcmVjb3JkID0gZW50cnkuY29tcGxldGlvbjtcbiAgICAgICAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgICAgdmFyIHRocm93biA9IHJlY29yZC5hcmc7XG4gICAgICAgICAgICByZXNldFRyeUVudHJ5KGVudHJ5KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHRocm93bjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBUaGUgY29udGV4dC5jYXRjaCBtZXRob2QgbXVzdCBvbmx5IGJlIGNhbGxlZCB3aXRoIGEgbG9jYXRpb25cbiAgICAgIC8vIGFyZ3VtZW50IHRoYXQgY29ycmVzcG9uZHMgdG8gYSBrbm93biBjYXRjaCBibG9jay5cbiAgICAgIHRocm93IG5ldyBFcnJvcihcImlsbGVnYWwgY2F0Y2ggYXR0ZW1wdFwiKTtcbiAgICB9LFxuXG4gICAgZGVsZWdhdGVZaWVsZDogZnVuY3Rpb24oaXRlcmFibGUsIHJlc3VsdE5hbWUsIG5leHRMb2MpIHtcbiAgICAgIHRoaXMuZGVsZWdhdGUgPSB7XG4gICAgICAgIGl0ZXJhdG9yOiB2YWx1ZXMoaXRlcmFibGUpLFxuICAgICAgICByZXN1bHROYW1lOiByZXN1bHROYW1lLFxuICAgICAgICBuZXh0TG9jOiBuZXh0TG9jXG4gICAgICB9O1xuXG4gICAgICBpZiAodGhpcy5tZXRob2QgPT09IFwibmV4dFwiKSB7XG4gICAgICAgIC8vIERlbGliZXJhdGVseSBmb3JnZXQgdGhlIGxhc3Qgc2VudCB2YWx1ZSBzbyB0aGF0IHdlIGRvbid0XG4gICAgICAgIC8vIGFjY2lkZW50YWxseSBwYXNzIGl0IG9uIHRvIHRoZSBkZWxlZ2F0ZS5cbiAgICAgICAgdGhpcy5hcmcgPSB1bmRlZmluZWQ7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgIH1cbiAgfTtcblxuICAvLyBSZWdhcmRsZXNzIG9mIHdoZXRoZXIgdGhpcyBzY3JpcHQgaXMgZXhlY3V0aW5nIGFzIGEgQ29tbW9uSlMgbW9kdWxlXG4gIC8vIG9yIG5vdCwgcmV0dXJuIHRoZSBydW50aW1lIG9iamVjdCBzbyB0aGF0IHdlIGNhbiBkZWNsYXJlIHRoZSB2YXJpYWJsZVxuICAvLyByZWdlbmVyYXRvclJ1bnRpbWUgaW4gdGhlIG91dGVyIHNjb3BlLCB3aGljaCBhbGxvd3MgdGhpcyBtb2R1bGUgdG8gYmVcbiAgLy8gaW5qZWN0ZWQgZWFzaWx5IGJ5IGBiaW4vcmVnZW5lcmF0b3IgLS1pbmNsdWRlLXJ1bnRpbWUgc2NyaXB0LmpzYC5cbiAgcmV0dXJuIGV4cG9ydHM7XG5cbn0oXG4gIC8vIElmIHRoaXMgc2NyaXB0IGlzIGV4ZWN1dGluZyBhcyBhIENvbW1vbkpTIG1vZHVsZSwgdXNlIG1vZHVsZS5leHBvcnRzXG4gIC8vIGFzIHRoZSByZWdlbmVyYXRvclJ1bnRpbWUgbmFtZXNwYWNlLiBPdGhlcndpc2UgY3JlYXRlIGEgbmV3IGVtcHR5XG4gIC8vIG9iamVjdC4gRWl0aGVyIHdheSwgdGhlIHJlc3VsdGluZyBvYmplY3Qgd2lsbCBiZSB1c2VkIHRvIGluaXRpYWxpemVcbiAgLy8gdGhlIHJlZ2VuZXJhdG9yUnVudGltZSB2YXJpYWJsZSBhdCB0aGUgdG9wIG9mIHRoaXMgZmlsZS5cbiAgdHlwZW9mIG1vZHVsZSA9PT0gXCJvYmplY3RcIiA/IG1vZHVsZS5leHBvcnRzIDoge31cbikpO1xuXG50cnkge1xuICByZWdlbmVyYXRvclJ1bnRpbWUgPSBydW50aW1lO1xufSBjYXRjaCAoYWNjaWRlbnRhbFN0cmljdE1vZGUpIHtcbiAgLy8gVGhpcyBtb2R1bGUgc2hvdWxkIG5vdCBiZSBydW5uaW5nIGluIHN0cmljdCBtb2RlLCBzbyB0aGUgYWJvdmVcbiAgLy8gYXNzaWdubWVudCBzaG91bGQgYWx3YXlzIHdvcmsgdW5sZXNzIHNvbWV0aGluZyBpcyBtaXNjb25maWd1cmVkLiBKdXN0XG4gIC8vIGluIGNhc2UgcnVudGltZS5qcyBhY2NpZGVudGFsbHkgcnVucyBpbiBzdHJpY3QgbW9kZSwgaW4gbW9kZXJuIGVuZ2luZXNcbiAgLy8gd2UgY2FuIGV4cGxpY2l0bHkgYWNjZXNzIGdsb2JhbFRoaXMuIEluIG9sZGVyIGVuZ2luZXMgd2UgY2FuIGVzY2FwZVxuICAvLyBzdHJpY3QgbW9kZSB1c2luZyBhIGdsb2JhbCBGdW5jdGlvbiBjYWxsLiBUaGlzIGNvdWxkIGNvbmNlaXZhYmx5IGZhaWxcbiAgLy8gaWYgYSBDb250ZW50IFNlY3VyaXR5IFBvbGljeSBmb3JiaWRzIHVzaW5nIEZ1bmN0aW9uLCBidXQgaW4gdGhhdCBjYXNlXG4gIC8vIHRoZSBwcm9wZXIgc29sdXRpb24gaXMgdG8gZml4IHRoZSBhY2NpZGVudGFsIHN0cmljdCBtb2RlIHByb2JsZW0uIElmXG4gIC8vIHlvdSd2ZSBtaXNjb25maWd1cmVkIHlvdXIgYnVuZGxlciB0byBmb3JjZSBzdHJpY3QgbW9kZSBhbmQgYXBwbGllZCBhXG4gIC8vIENTUCB0byBmb3JiaWQgRnVuY3Rpb24sIGFuZCB5b3UncmUgbm90IHdpbGxpbmcgdG8gZml4IGVpdGhlciBvZiB0aG9zZVxuICAvLyBwcm9ibGVtcywgcGxlYXNlIGRldGFpbCB5b3VyIHVuaXF1ZSBwcmVkaWNhbWVudCBpbiBhIEdpdEh1YiBpc3N1ZS5cbiAgaWYgKHR5cGVvZiBnbG9iYWxUaGlzID09PSBcIm9iamVjdFwiKSB7XG4gICAgZ2xvYmFsVGhpcy5yZWdlbmVyYXRvclJ1bnRpbWUgPSBydW50aW1lO1xuICB9IGVsc2Uge1xuICAgIEZ1bmN0aW9uKFwiclwiLCBcInJlZ2VuZXJhdG9yUnVudGltZSA9IHJcIikocnVudGltZSk7XG4gIH1cbn1cbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0aWQ6IG1vZHVsZUlkLFxuXHRcdGxvYWRlZDogZmFsc2UsXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuXHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIl9fd2VicGFja19yZXF1aXJlX18ubm1kID0gZnVuY3Rpb24obW9kdWxlKSB7XG5cdG1vZHVsZS5wYXRocyA9IFtdO1xuXHRpZiAoIW1vZHVsZS5jaGlsZHJlbikgbW9kdWxlLmNoaWxkcmVuID0gW107XG5cdHJldHVybiBtb2R1bGU7XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7IiwiLy8gQ3JhZCBjbGFzcyBKUyBjb2RlXHJcblxyXG5jbGFzcyBDYXJkIHtcclxuICAgIGNvbnN0cnVjdG9yKHsgbmFtZSwgbGluaywgb3duZXI6IHsgX2lkOiBvd25lcklkIH0sIF9pZCwgbGlrZXMgfSwgdGVtcGxhdGUsIGhhbmRsZUNhcmRDbGljaywgaGFuZGxlRGVsZXRlQ2xpY2ssIHNob3VsZEhpZGVEZWxldGVJY29uLCBsaWtlc0hhbmRsZXJzKSB7XHJcbiAgICAgICAgdGhpcy5fbmFtZSA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5fbGluayA9IGxpbms7XHJcbiAgICAgICAgdGhpcy5fdGVtcGxhdGUgPSB0ZW1wbGF0ZTtcclxuICAgICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sgPSBoYW5kbGVEZWxldGVDbGljaztcclxuICAgICAgICB0aGlzLl9zaG91bGRIaWRlRGVsZXRlSWNvbiA9IHNob3VsZEhpZGVEZWxldGVJY29uO1xyXG4gICAgICAgIHRoaXMuX293bmVyID0gb3duZXJJZDtcclxuICAgICAgICB0aGlzLl9pZCA9IF9pZDtcclxuICAgICAgICB0aGlzLl9saWtlcyA9IGxpa2VzO1xyXG4gICAgICAgIHRoaXMuX2xpa2VzSGFuZGxlcnMgPSBsaWtlc0hhbmRsZXJzO1xyXG4gICAgfVxyXG5cclxuICAgIF9zaG91bGRTaG93TGlrZXMoKSB7XHJcbiAgICAgICAgY29uc3QgY2FyZExpa2VzID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2VzLW51bVwiKTtcclxuICAgICAgICBjb25zdCBsaWtlQnV0dG9uID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fbGlrZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBjYXJkTGlrZXMudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlcy5sZW5ndGg7XHJcbiAgICAgICAgICAgIGNhcmRMaWtlcy5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNhcmRMaWtlcy5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5fbGlrZXNIYW5kbGVycy5pc1VzZXJJbmZvTGlrZSh0aGlzLl9saWtlcykpIHtcclxuICAgICAgICAgICAgbGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiY2FyZF9fbGlrZS1idXR0b24tZnVsbFwiKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsaWtlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJjYXJkX19saWtlLWJ1dHRvbi1mdWxsXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfY3JlYXRlQ2xvbmUoKSB7XHJcbiAgICAgICAgdGhpcy5fY2FyZCA9IHRoaXMuX3RlbXBsYXRlLmNsb25lTm9kZSh0cnVlKTtcclxuICAgICAgICBjb25zdCBjYXJkSW1hZ2UgPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XHJcbiAgICAgICAgY29uc3QgY2FyZFRleHQgPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGV4dFwiKTtcclxuXHJcbiAgICAgICAgY2FyZFRleHQudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG4gICAgICAgIGNhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgICAgIGNhcmRJbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuX3Nob3VsZFNob3dMaWtlcygpO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5fY2FyZDtcclxuICAgIH1cclxuXHJcbiAgICBfcmVtb3ZlQ2FyZCA9ICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jYXJkLnJlbW92ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIF9vbkRlbGV0ZUJ1dHRvbkNsaWNrKCkge1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrKHRoaXMuX2lkLCB0aGlzLl9yZW1vdmVDYXJkKTtcclxuICAgIH1cclxuXHJcbiAgICBfYWRkRGVsZXRlQnV0dG9uTGlzdGVuZXIoKSB7XHJcbiAgICAgICAgY29uc3QgZGVsZXRlQnV0dG9uID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIik7XHJcblxyXG4gICAgICAgIGNvbnN0IGhpZGRlbiA9IHRoaXMuX3Nob3VsZEhpZGVEZWxldGVJY29uKHRoaXMuX293bmVyKTtcclxuXHJcbiAgICAgICAgaWYgKGhpZGRlbikge1xyXG4gICAgICAgICAgICBkZWxldGVCdXR0b24uY2xhc3NMaXN0LmFkZChcImNhcmRfX2RlbGV0ZS1idXR0b25fdmlzaWJpbGl0eVwiKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBkZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX29uRGVsZXRlQnV0dG9uQ2xpY2soKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIF9vbkxpa2VDbGljaygpIHtcclxuICAgICAgICBjb25zdCBsaWtlQnV0dG9uID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpO1xyXG4gICAgICAgIGxldCB1cGRhdGVkQ2FyZCA9IHt9O1xyXG5cclxuICAgICAgICBpZiAobGlrZUJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoXCJjYXJkX19saWtlLWJ1dHRvbi1mdWxsXCIpKSB7XHJcbiAgICAgICAgICAgIHVwZGF0ZWRDYXJkID0gYXdhaXQgdGhpcy5fbGlrZXNIYW5kbGVycy5kZWxldGUodGhpcy5faWQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHVwZGF0ZWRDYXJkID0gYXdhaXQgdGhpcy5fbGlrZXNIYW5kbGVycy5hZGQodGhpcy5faWQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHVwZGF0ZWRDYXJkKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgbGlrZXMgfSA9IHVwZGF0ZWRDYXJkO1xyXG4gICAgICAgICAgICB0aGlzLl9saWtlcyA9IGxpa2VzO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fc2hvdWxkU2hvd0xpa2VzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9hZGRMaWtlQnV0dG9uTGlzdGVuZXIoKSB7XHJcbiAgICAgICAgY29uc3QgbGlrZUJ1dHRvbiA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcclxuICAgICAgICBsaWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX29uTGlrZUNsaWNrKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgX29uQ2FyZENsaWNrKCkge1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh7IGxpbms6IHRoaXMuX2xpbmssIHRleHQ6IHRoaXMuX25hbWUgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgX2FkZENhcmRJbWFnZUxpc3RlbmVyKCkge1xyXG4gICAgICAgIGNvbnN0IGNhcmRJbWFnZSA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcclxuXHJcbiAgICAgICAgY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX29uQ2FyZENsaWNrKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICAgIHRoaXMuX2FkZERlbGV0ZUJ1dHRvbkxpc3RlbmVyKCk7XHJcbiAgICAgICAgdGhpcy5fYWRkTGlrZUJ1dHRvbkxpc3RlbmVyKCk7XHJcbiAgICAgICAgdGhpcy5fYWRkQ2FyZEltYWdlTGlzdGVuZXIoKTtcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVDYXJkKCkge1xyXG4gICAgICAgIHRoaXMuX2NhcmQgPSB0aGlzLl9jcmVhdGVDbG9uZSgpO1xyXG4gICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhcmQ7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB7IENhcmQgfTsiLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xyXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcclxuICAgIHRoaXMuX3VybCA9IG9wdGlvbnMuYmFzZVVybDtcclxuICAgIHRoaXMuX3Rva2VuID0gb3B0aW9ucy50b2tlbjtcclxuICB9XHJcblxyXG4gIGdldFRva2VuKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3Rva2VuO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgZ2V0SW5pdGlhbENhcmRzKCkge1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzYCwge1xyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fdG9rZW5cclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKHJlc3BvbnNlLm9rKSB7XHJcbiAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zb2xlLmxvZyhcIlNvbXRoaW5nIHdlbnQgd3JvbmdcIiwgcmVzcG9uc2Uuc3RhdHVzLCByZXNwb25zZS5zdGF0dXNUZXh0KVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgZ2V0VXNlckluZm8oKSB7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke3RoaXMuX3VybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl90b2tlblxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAocmVzcG9uc2Uub2spIHtcclxuICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwiU29tdGhpbmcgd2VudCB3cm9uZ1wiLCByZXNwb25zZS5zdGF0dXMsIHJlc3BvbnNlLnN0YXR1c1RleHQpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBlZGl0VXNlckluZm8obmFtZSwgYWJvdXQpIHtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7dGhpcy5fdXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl90b2tlbixcclxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxyXG4gICAgICB9LFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogbmFtZSxcclxuICAgICAgICBhYm91dDogYWJvdXRcclxuICAgICAgfSlcclxuICAgIH0pO1xyXG5cclxuICAgIGlmIChyZXNwb25zZS5vaykge1xyXG4gICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc29sZS5sb2coXCJTb210aGluZyB3ZW50IHdyb25nXCIsIHJlc3BvbnNlLnN0YXR1cywgcmVzcG9uc2Uuc3RhdHVzVGV4dClcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIGFkZENhcmQobmFtZSwgbGluaykge1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fdG9rZW4sXHJcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcclxuICAgICAgfSxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWUsXHJcbiAgICAgICAgbGluayxcclxuICAgICAgfSlcclxuICAgIH0pO1xyXG5cclxuICAgIGlmIChyZXNwb25zZS5vaykge1xyXG4gICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc29sZS5sb2coXCJTb210aGluZyB3ZW50IHdyb25nXCIsIHJlc3BvbnNlLnN0YXR1cywgcmVzcG9uc2Uuc3RhdHVzVGV4dClcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIGRlbGV0ZUNhcmQoY2FyZElkKSB7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl90b2tlbixcclxuICAgICAgfSxcclxuICAgIH0pO1xyXG5cclxuICAgIGlmIChyZXNwb25zZS5vaykge1xyXG4gICAgICByZXR1cm4gcmVzcG9uc2Uub2s7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zb2xlLmxvZyhcIlNvbXRoaW5nIHdlbnQgd3JvbmdcIiwgcmVzcG9uc2Uuc3RhdHVzLCByZXNwb25zZS5zdGF0dXNUZXh0KVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgZWRpdFByb2ZpbGVJbWFnZShhdmF0YXIpIHtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7dGhpcy5fdXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fdG9rZW4sXHJcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcclxuICAgICAgfSxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIGF2YXRhcixcclxuICAgICAgfSlcclxuICAgIH0pO1xyXG5cclxuICAgIGlmIChyZXNwb25zZS5vaykge1xyXG4gICAgICByZXR1cm4geyBhdmF0YXIgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwiU29tdGhpbmcgd2VudCB3cm9uZ1wiLCByZXNwb25zZS5zdGF0dXMsIHJlc3BvbnNlLnN0YXR1c1RleHQpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBhZGRMaWtlKGNhcmRJZCkge1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fdG9rZW4sXHJcbiAgICAgIH0sXHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAocmVzcG9uc2Uub2spIHtcclxuICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwiU29tdGhpbmcgd2VudCB3cm9uZ1wiLCByZXNwb25zZS5zdGF0dXMsIHJlc3BvbnNlLnN0YXR1c1RleHQpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBkZWxldGVMaWtlKGNhcmRJZCkge1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fdG9rZW4sXHJcbiAgICAgIH0sXHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAocmVzcG9uc2Uub2spIHtcclxuICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwiU29tdGhpbmcgd2VudCB3cm9uZ1wiLCByZXNwb25zZS5zdGF0dXMsIHJlc3BvbnNlLnN0YXR1c1RleHQpXHJcbiAgICB9XHJcbiAgfVxyXG59IiwiLy8gUG9wdXAgY2xhc3MgSlMgY29kZVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIH1cclxuXHJcbiAgICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZ0KSA9PiB7XHJcbiAgICAgICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvcGVuKCkge1xyXG4gICAgICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9vcGVuXCIpO1xyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICAgIH1cclxuXHJcbiAgICBjbG9zZSgpIHtcclxuICAgICAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfb3BlblwiKTtcclxuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcclxuICAgICAgICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBfX2Nsb3NlLWJ1dHRvblwiKSB8fCBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwXCIpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG4iLCIvLyBQb3B1cFdpdGhJbWFnZSBjbGFzcyBKUyBjb2RlXHJcblxyXG5pbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX2NhcmRJbWFnZVBvcHVwID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2FyZC1pbWFnZVwiKTtcclxuICAgICAgICB0aGlzLl9jYXJkVGV4dFBvcHVwID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2FyZC10ZXh0XCIpO1xyXG4gICAgfVxyXG5cclxuICAgIG9wZW4gPSAoeyBsaW5rLCB0ZXh0IH0pID0+IHtcclxuICAgICAgICBzdXBlci5vcGVuKCk7XHJcblxyXG4gICAgICAgIHRoaXMuX2NhcmRJbWFnZVBvcHVwLnNyYyA9IGxpbms7XHJcbiAgICAgICAgdGhpcy5fY2FyZEltYWdlUG9wdXAuYWx0ID0gdGV4dDtcclxuICAgICAgICB0aGlzLl9jYXJkVGV4dFBvcHVwLnRleHRDb250ZW50ID0gdGV4dDtcclxuICAgIH1cclxufVxyXG4iLCIvLyBQb3B1cFdpdGhGb3JtIGNsYXNzIEpTIGNvZGVcclxuXHJcbmltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGZvcm1TdWJtaXRIYW5kbGVyKSB7XHJcbiAgICAgICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5fZm9ybVN1Ym1pdEhhbmRsZXIgPSBmb3JtU3VibWl0SGFuZGxlcjtcclxuICAgICAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5mb3JtXCIpO1xyXG4gICAgICAgIHRoaXMuX2lucHV0cyA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbChcImlucHV0XCIpO1xyXG4gICAgICAgIHRoaXMuX2Zvcm1WYWx1ZXMgPSB7fTtcclxuICAgIH1cclxuXHJcbiAgICBfb25TdWJtaXQoKSB7XHJcbiAgICAgICAgY29uc3QgZm9ybUJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcIi5mb3JtX19idXR0b25cIik7XHJcblxyXG4gICAgICAgIHRoaXMuX2dldElucHV0VmFsdWVzKCk7XHJcbiAgICAgICAgZm9ybUJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2F2aW5nLi4uXCI7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLl9mb3JtU3VibWl0SGFuZGxlcih0aGlzLl9mb3JtVmFsdWVzKTtcclxuICAgIH1cclxuXHJcbiAgICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICAgICAgdGhpcy5faW5wdXRzLmZvckVhY2goaW5wdXQgPT4gdGhpcy5fZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRJbnB1dFZhbHVlcyhpbnB1dFZhbHVlcykge1xyXG4gICAgICAgIGlucHV0VmFsdWVzLmZvckVhY2goKGlucHV0VmFsdWUsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2lucHV0c1tpbmRleF0udmFsdWUgPSBpbnB1dFZhbHVlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEZvcm0oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Zvcm07XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICAgICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB0aGlzLl9vblN1Ym1pdCgpXHJcbiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBvcGVuID0gKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGZvcm1CdXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fYnV0dG9uXCIpO1xyXG4gICAgICAgIGZvcm1CdXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmVcIjtcclxuICAgICAgICBcclxuICAgICAgICBzdXBlci5vcGVuKCk7XHJcbiAgICB9XHJcblxyXG4gICAgY2xvc2UoKSB7XHJcbiAgICAgICAgc3VwZXIuY2xvc2UoKTtcclxuICAgICAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XHJcbiAgICB9XHJcbn0iLCIvLyBQb3B1cFdpdGhGb3JtIGNsYXNzIEpTIGNvZGVcclxuXHJcbmltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRGVsZXRlIGV4dGVuZHMgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgZm9ybVN1Ym1pdEhhbmRsZXIpIHtcclxuICAgICAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl9mb3JtU3VibWl0SGFuZGxlciA9IGZvcm1TdWJtaXRIYW5kbGVyO1xyXG4gICAgfVxyXG5cclxuICAgIF9vblN1Ym1pdCgpIHtcclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IHRoaXMuX2Zvcm1TdWJtaXRIYW5kbGVyKHRoaXMuX2NhcmRJZCk7XHJcblxyXG4gICAgICAgIGlmIChyZXNwb25zZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9yZW1vdmVIYW5kbGVyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgdGhpcy5fb25TdWJtaXQoKTtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG9wZW4gPSAoY2FyZElkLCByZW1vdmVIYW5kbGVyKSA9PiB7XHJcbiAgICAgICAgc3VwZXIub3BlbigpO1xyXG5cclxuICAgICAgICB0aGlzLl9jYXJkSWQgPSBjYXJkSWQ7XHJcbiAgICAgICAgdGhpcy5fcmVtb3ZlSGFuZGxlciA9IHJlbW92ZUhhbmRsZXI7XHJcbiAgICB9XHJcblxyXG4gICAgY2xvc2UoKSB7XHJcbiAgICAgICAgc3VwZXIuY2xvc2UoKTtcclxuICAgIH1cclxufSIsIi8vIFNlY3Rpb24gY2xhc3MgSlMgY29kZVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7IGl0ZW1zICxyZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xyXG4gICAgICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgICAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRJdGVtcyhpdGVtcykge1xyXG4gICAgICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyZXIoKSB7XHJcbiAgICAgICAgdGhpcy5faXRlbXMuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgICAgICAgICB0aGlzLmFkZEl0ZW0oZWxlbWVudCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkSXRlbShlbGVtZW50KSB7XHJcbiAgICAgICAgdGhpcy5fY29udGFpbmVyLmFwcGVuZChlbGVtZW50KTtcclxuICAgIH1cclxuXHJcbiAgICBwcmVwZW5kSXRlbShlbGVtZW50KSB7XHJcbiAgICAgICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgICB9XHJcbn0iLCIvLyBVc2VySW5mbyBjbGFzcyBKUyBjb2RlXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7IHVzZXJOYW1lU2VsZWN0b3IsIHVzZXJKb2JTZWxlY3RvciwgdXNlckF2YXRhclNlbGVjdG9yIH0pIHtcclxuICAgICAgICB0aGlzLl91c2VyTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlck5hbWVTZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5fdXNlckpvYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlckpvYlNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl9pZCA9IFwiXCI7XHJcbiAgICAgICAgdGhpcy5fYXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyQXZhdGFyU2VsZWN0b3IpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFVzZXJJbmZvKCkge1xyXG4gICAgICAgY29uc3QgdXNlckluZm8gPSB7IG5hbWU6IHRoaXMuX3VzZXJOYW1lLnRleHRDb250ZW50LCBhYm91dDogdGhpcy5fdXNlckpvYi50ZXh0Q29udGVudCwgaWQ6IHRoaXMuX2lkLCBhdmF0YXI6IHRoaXMuX2F2YXRhci5zcmMgfTtcclxuICAgICAgIHJldHVybiB1c2VySW5mbztcclxuICAgIH1cclxuXHJcbiAgICBzZXRVc2VySW5mbyh7IG5hbWUsIGFib3V0LCBfaWQsIGF2YXRhciB9KSB7XHJcbiAgICAgICAgdGhpcy5fdXNlck5hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMuX3VzZXJKb2IudGV4dENvbnRlbnQgPSBhYm91dDtcclxuICAgICAgICB0aGlzLl9pZCA9IF9pZDtcclxuICAgICAgICB0aGlzLl9hdmF0YXIuc3JjID0gYXZhdGFyO1xyXG4gICAgfVxyXG5cclxuICAgIHNldEF2YXRhckxpbmsoeyBhdmF0YXIgfSkge1xyXG4gICAgICAgIHRoaXMuX2F2YXRhci5zcmMgPSBhdmF0YXI7XHJcbiAgICB9XHJcbn1cclxuIiwiLy8gRm9ybVZhbGlkYXRvciBjbGFzcyBKUyBjb2RlXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICAgIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtRWxlbWVudCkge1xyXG4gICAgICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBzZXR0aW5ncy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgICAgICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICAgICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBzZXR0aW5ncy5lcnJvckNsYXNzO1xyXG5cclxuICAgICAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xyXG4gICAgICAgIHRoaXMuX2lucHV0RWxlbWVudHMgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICAgIH1cclxuXHJcbiAgICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICAgICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG5cclxuICAgICAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gICAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICB9XHJcblxyXG4gICAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcclxuXHJcbiAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgICAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgICB9XHJcblxyXG4gICAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgICAgIGNvbnN0IGhhc0ludmFsaWRJbnB1dCA9IEFycmF5LmZyb20odGhpcy5faW5wdXRFbGVtZW50cykuc29tZShpbnB1dEVsZW1lbnQgPT4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCk7XHJcblxyXG4gICAgICAgIGlmIChoYXNJbnZhbGlkSW5wdXQpIHtcclxuICAgICAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcclxuICAgICAgICBpZiAoaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudClcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICB0aGlzLl9pbnB1dEVsZW1lbnRzLmZvckVhY2goaW5wdXRFbGVtZW50ID0+IHtcclxuICAgICAgICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlc2V0VmFsaWRhdGlvbigpIHtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG5cclxuICAgICAgICB0aGlzLl9pbnB1dEVsZW1lbnRzLmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICAgICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBldnQgPT4ge1xyXG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIH1cclxufSIsIi8vIENvbnN0YW50cyBKU1xyXG5cclxuLy8gSW1hZ2VzXHJcbmV4cG9ydCBjb25zdCBoZWFkZXJMb2dvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJpbWFnZS1oZWFkZXItbG9nb1wiKTtcclxuXHJcbi8vIFByb2ZpbGUtU2VjdGlvbiBidXR0b25zXHJcbmV4cG9ydCBjb25zdCBlZGl0UHJvZmlsZUluZm9CdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCIpO1xyXG5leHBvcnQgY29uc3QgYWRkTmV3Q2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcclxuZXhwb3J0IGNvbnN0IGVkaXRQcm9maWxlSW1hZ2VCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2ltYWdlLWVkaXQtYnV0dG9uXCIpO1xyXG5cclxuLy8gQ2FyZHNcclxuZXhwb3J0IGNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC10ZW1wbGF0ZVwiKS5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKTtcclxuXHJcbi8vIEZvcm0gVmFsaWRhdGlvblxyXG5leHBvcnQgY29uc3Qgc2V0dGluZ3MgPSB7XHJcbiAgICBpbnB1dFNlbGVjdG9yOiBcIi5mb3JtX19pbnB1dFwiLFxyXG4gICAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLmZvcm1fX2J1dHRvblwiLFxyXG4gICAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJmb3JtX19idXR0b25fZGlzYWJsZWRcIixcclxuICAgIGlucHV0RXJyb3JDbGFzczogXCJmb3JtX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgICBlcnJvckNsYXNzOiBcImZvcm1fX2Vycm9yX3Zpc2libGVcIixcclxufSIsIi8vIGluZGV4IEpTIGZpbGVcclxuXHJcbmltcG9ydCBcInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZVwiO1xyXG5pbXBvcnQgeyBDYXJkIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5pbXBvcnQgQXBpIGZyb20gXCIuLi91dGlscy9BcGkuanNcIjtcclxuaW1wb3J0IGhlYWRlckxvZ29TcmMgZnJvbSBcIi4uL2ltYWdlcy9sb2dvLXZlY3Rvci5zdmdcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aERlbGV0ZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhEZWxldGUuanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgeyBoZWFkZXJMb2dvLCBlZGl0UHJvZmlsZUluZm9CdXR0b24sIGFkZE5ld0NhcmRCdXR0b24sIGNhcmRUZW1wbGF0ZSwgc2V0dGluZ3MsIGVkaXRQcm9maWxlSW1hZ2VCdXR0b24gfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcblxyXG4vLyBDbGFzcyBpbnN0YW5jZXNcclxuY29uc3QgcG9wdXBDYXJkSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIucG9wdXBfdHlwZV9jYXJkLXBpY3R1cmVcIik7XHJcbmNvbnN0IHByb2ZpbGVVc2VySW5mbyA9IG5ldyBVc2VySW5mbyh7IHVzZXJOYW1lU2VsZWN0b3I6IFwiLnByb2ZpbGVfX2luZm8tbmFtZVwiLCB1c2VySm9iU2VsZWN0b3I6IFwiLnByb2ZpbGVfX2luZm8tYWJvdXRcIiwgdXNlckF2YXRhclNlbGVjdG9yOiBcIi5wcm9maWxlX19pbWFnZVwiIH0pO1xyXG5jb25zdCBwb3B1cEVkaXRQcm9maWxlID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIucG9wdXBfdHlwZV9lZGl0LXByb2ZpbGVcIiwgaGFuZGxlRWRpdEZvcm1TdWJtaXQpO1xyXG5jb25zdCBwb3B1cEFkZENhcmQgPSBuZXcgUG9wdXBXaXRoRm9ybShcIi5wb3B1cF90eXBlX2FkZC1jYXJkXCIsIGhhbmRsZUFkZEZvcm1TdWJtaXQpO1xyXG5jb25zdCBwb3B1cERlbGV0ZUJ1dHRvbiA9IG5ldyBQb3B1cFdpdGhEZWxldGUoXCIucG9wdXBfdHlwZV9jYXJkLWRlbGV0ZVwiLCBoYW5kbGVEZWxldGVGb3JtU3VibWl0KTtcclxuY29uc3QgcG9wdXBDaGFuZ2VQaWN0dXJlID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIucG9wdXBfdHlwZV9wcm9maWxlLWltYWdlXCIsIGhhbmRsZUNoYW5nZUZvcm1TdWJtaXQpO1xyXG5jb25zdCBjYXJkc1NlY3Rpb24gPSBuZXcgU2VjdGlvbih7IGl0ZW1zOiBbXSwgcmVuZGVyZXI6IGNyZWF0ZUNhcmRFbGVtZW50IH0sIFwiLmNhcmRzXCIpO1xyXG5jb25zdCBlZGl0UHJvZmlsZUluZm9Gb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3Ioc2V0dGluZ3MsIHBvcHVwRWRpdFByb2ZpbGUuZ2V0Rm9ybSgpKTtcclxuY29uc3QgY2hhbmdlUGljdHVyZUZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgcG9wdXBDaGFuZ2VQaWN0dXJlLmdldEZvcm0oKSk7XHJcbmNvbnN0IEFkZENhcmRmb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3Ioc2V0dGluZ3MsIHBvcHVwQWRkQ2FyZC5nZXRGb3JtKCkpO1xyXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcclxuICAgIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cC0xMlwiLFxyXG4gICAgdG9rZW46IFwiZDMyZjZkZjYtYTQ3OC00NGM3LTk4ZTItMzlmMjBlZmI3ZmI0XCJcclxufSk7XHJcblxyXG4vLyBpbWFnZXNcclxuaGVhZGVyTG9nby5zcmMgPSBoZWFkZXJMb2dvU3JjO1xyXG5cclxuLy9Qb3B1cCBDYXJkIEltYWdlXHJcbnBvcHVwQ2FyZEltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vLyBQb3B1cCBCdXR0b25zXHJcbmVkaXRQcm9maWxlSW5mb0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuICAgIGNvbnN0IHsgbmFtZSwgYWJvdXQgfSA9IHByb2ZpbGVVc2VySW5mby5nZXRVc2VySW5mbygpO1xyXG5cclxuICAgIHBvcHVwRWRpdFByb2ZpbGUuc2V0SW5wdXRWYWx1ZXMoW25hbWUsIGFib3V0XSk7XHJcbiAgICBlZGl0UHJvZmlsZUluZm9Gb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gICAgcG9wdXBFZGl0UHJvZmlsZS5vcGVuKCk7XHJcbn0pO1xyXG5cclxuYWRkTmV3Q2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuICAgIEFkZENhcmRmb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gICAgcG9wdXBBZGRDYXJkLm9wZW4oKTtcclxufSk7XHJcblxyXG5lZGl0UHJvZmlsZUltYWdlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xyXG4gICAgY29uc3QgeyBhdmF0YXIgfSA9IHByb2ZpbGVVc2VySW5mby5nZXRVc2VySW5mbygpO1xyXG5cclxuICAgIHBvcHVwQ2hhbmdlUGljdHVyZS5zZXRJbnB1dFZhbHVlcyhbYXZhdGFyXSk7XHJcbiAgICBjaGFuZ2VQaWN0dXJlRm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcclxuICAgIHBvcHVwQ2hhbmdlUGljdHVyZS5vcGVuKCk7XHJcbn0pO1xyXG5cclxuXHJcblxyXG4vLyBQb3B1cC1mb3Jtc1xyXG5mdW5jdGlvbiBoYW5kbGVFZGl0Rm9ybVN1Ym1pdChpbnB1dFZhbHVlcykge1xyXG4gICAgY29uc3QgeyBuYW1lLCBhYm91dCB9ID0gaW5wdXRWYWx1ZXM7XHJcbiAgICBcclxuICAgIHJldHVybiBhcGkuZWRpdFVzZXJJbmZvKG5hbWUsIGFib3V0KVxyXG4gICAgICAgIC50aGVuKChwcm9maWxlRGF0YSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAocHJvZmlsZURhdGEpe1xyXG4gICAgICAgICAgICAgICAgcHJvZmlsZVVzZXJJbmZvLnNldFVzZXJJbmZvKHByb2ZpbGVEYXRhKTtcclxuICAgICAgICAgICAgfSAgIFxyXG4gICAgICAgIH0pO1xyXG59O1xyXG5cclxuYXN5bmMgZnVuY3Rpb24gaGFuZGxlQWRkRm9ybVN1Ym1pdChpbnB1dFZhbHVlcykge1xyXG4gICAgY29uc3QgeyB0aXRsZSwgbGluayB9ID0gaW5wdXRWYWx1ZXM7XHJcbiAgICBjb25zdCBjYXJkRGF0YSA9IGF3YWl0IGFwaS5hZGRDYXJkKHRpdGxlLCBsaW5rKTtcclxuICAgIGlmIChjYXJkRGF0YSkge1xyXG4gICAgICAgIGNvbnN0IGNhcmQgPSBjcmVhdGVDYXJkRWxlbWVudChjYXJkRGF0YSk7XHJcbiAgICAgICAgY2FyZHNTZWN0aW9uLnByZXBlbmRJdGVtKGNhcmQpO1xyXG4gICAgfVxyXG59O1xyXG5cclxuYXN5bmMgZnVuY3Rpb24gaGFuZGxlQ2hhbmdlRm9ybVN1Ym1pdChpbnB1dFZhbHVlcykge1xyXG4gICAgY29uc3QgeyBhdmF0YXIgfSA9IGlucHV0VmFsdWVzO1xyXG4gICAgY29uc3QgcHJvZmlsZUltYWdlID0gYXdhaXQgYXBpLmVkaXRQcm9maWxlSW1hZ2UoYXZhdGFyKTtcclxuXHJcbiAgICBpZiAocHJvZmlsZUltYWdlKSB7XHJcbiAgICAgICAgcHJvZmlsZVVzZXJJbmZvLnNldEF2YXRhckxpbmsocHJvZmlsZUltYWdlKTtcclxuICAgIH1cclxufVxyXG5cclxuLy8gUG9wdXAtQ2FyZCBEZWxldGVcclxuYXN5bmMgZnVuY3Rpb24gaGFuZGxlRGVsZXRlRm9ybVN1Ym1pdChjYXJkSWQpIHtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXBpLmRlbGV0ZUNhcmQoY2FyZElkKTtcclxuICAgIHJldHVybiByZXNwb25zZTtcclxufVxyXG5cclxuZWRpdFByb2ZpbGVJbmZvRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbkFkZENhcmRmb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuY2hhbmdlUGljdHVyZUZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxucG9wdXBFZGl0UHJvZmlsZS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5wb3B1cEFkZENhcmQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxucG9wdXBEZWxldGVCdXR0b24uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxucG9wdXBDaGFuZ2VQaWN0dXJlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCBsaWtlc0hhbmRsZXJzID0ge1xyXG4gICAgYWRkOiBhcGkuYWRkTGlrZS5iaW5kKGFwaSksXHJcbiAgICBkZWxldGU6IGFwaS5kZWxldGVMaWtlLmJpbmQoYXBpKSxcclxuICAgIGlzVXNlckluZm9MaWtlLFxyXG59O1xyXG5cclxuZnVuY3Rpb24gaXNVc2VySW5mb0xpa2UobGlrZXNMaXN0KSB7XHJcbiAgICBjb25zdCB7IGlkIH0gPSBwcm9maWxlVXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuXHJcbiAgICByZXR1cm4gbGlrZXNMaXN0LnNvbWUoKHsgX2lkIH0pID0+IF9pZCA9PT0gaWQpO1xyXG59XHJcblxyXG4vLyBDcmVhdGUgQ2FyZCAtIEFkZCBDYXJkIFBvcHVwXHJcbmZ1bmN0aW9uIGNyZWF0ZUNhcmRFbGVtZW50KGl0ZW0pIHtcclxuICAgIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChpdGVtLCBjYXJkVGVtcGxhdGUsIHBvcHVwQ2FyZEltYWdlLm9wZW4sIHBvcHVwRGVsZXRlQnV0dG9uLm9wZW4sIHNob3VsZEhpZGVEZWxldGVJY29uLCBsaWtlc0hhbmRsZXJzKTtcclxuXHJcbiAgICByZXR1cm4gY2FyZC5jcmVhdGVDYXJkKCk7XHJcbn1cclxuXHJcbi8vIEFwaVxyXG5hc3luYyBmdW5jdGlvbiBpbml0KCkge1xyXG4gICAgY29uc3QgW2NhcmRzLCB1c2VySW5mb10gPSBhd2FpdCBQcm9taXNlLmFsbChbXHJcbiAgICAgICAgYXBpLmdldEluaXRpYWxDYXJkcygpLFxyXG4gICAgICAgIGFwaS5nZXRVc2VySW5mbygpXHJcbiAgICBdKTtcclxuXHJcbiAgICBpZiAodXNlckluZm8gJiYgY2FyZHMpIHtcclxuICAgICAgICBwcm9maWxlVXNlckluZm8uc2V0VXNlckluZm8odXNlckluZm8pO1xyXG4gICAgICAgIGNhcmRzU2VjdGlvbi5zZXRJdGVtcyhjYXJkcyk7XHJcbiAgICAgICAgY2FyZHNTZWN0aW9uLnJlbmRlcmVyKCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmluaXQoKTtcclxuXHJcbmZ1bmN0aW9uIHNob3VsZEhpZGVEZWxldGVJY29uKG93bmVySWQpIHtcclxuICAgIGNvbnN0IHsgaWQgfSA9IHByb2ZpbGVVc2VySW5mby5nZXRVc2VySW5mbygpO1xyXG4gICAgaWYgKGlkID09PSBvd25lcklkKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxufVxyXG4iXSwibmFtZXMiOlsicnVudGltZSIsImV4cG9ydHMiLCJ1bmRlZmluZWQiLCJPcCIsIk9iamVjdCIsInByb3RvdHlwZSIsImhhc093biIsImhhc093blByb3BlcnR5IiwiJFN5bWJvbCIsIlN5bWJvbCIsIml0ZXJhdG9yU3ltYm9sIiwiaXRlcmF0b3IiLCJhc3luY0l0ZXJhdG9yU3ltYm9sIiwiYXN5bmNJdGVyYXRvciIsInRvU3RyaW5nVGFnU3ltYm9sIiwidG9TdHJpbmdUYWciLCJkZWZpbmUiLCJvYmoiLCJrZXkiLCJ2YWx1ZSIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiZXJyIiwid3JhcCIsImlubmVyRm4iLCJvdXRlckZuIiwic2VsZiIsInRyeUxvY3NMaXN0IiwicHJvdG9HZW5lcmF0b3IiLCJHZW5lcmF0b3IiLCJnZW5lcmF0b3IiLCJjcmVhdGUiLCJjb250ZXh0IiwiQ29udGV4dCIsIl9pbnZva2UiLCJzdGF0ZSIsIkdlblN0YXRlU3VzcGVuZGVkU3RhcnQiLCJtZXRob2QiLCJhcmciLCJHZW5TdGF0ZUV4ZWN1dGluZyIsIkVycm9yIiwiR2VuU3RhdGVDb21wbGV0ZWQiLCJkb25lUmVzdWx0IiwiZGVsZWdhdGUiLCJkZWxlZ2F0ZVJlc3VsdCIsIm1heWJlSW52b2tlRGVsZWdhdGUiLCJDb250aW51ZVNlbnRpbmVsIiwic2VudCIsIl9zZW50IiwiZGlzcGF0Y2hFeGNlcHRpb24iLCJhYnJ1cHQiLCJyZWNvcmQiLCJ0cnlDYXRjaCIsInR5cGUiLCJkb25lIiwiR2VuU3RhdGVTdXNwZW5kZWRZaWVsZCIsIm1ha2VJbnZva2VNZXRob2QiLCJmbiIsImNhbGwiLCJHZW5lcmF0b3JGdW5jdGlvbiIsIkdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlIiwiSXRlcmF0b3JQcm90b3R5cGUiLCJ0aGlzIiwiZ2V0UHJvdG8iLCJnZXRQcm90b3R5cGVPZiIsIk5hdGl2ZUl0ZXJhdG9yUHJvdG90eXBlIiwidmFsdWVzIiwiR3AiLCJkZWZpbmVJdGVyYXRvck1ldGhvZHMiLCJmb3JFYWNoIiwiQXN5bmNJdGVyYXRvciIsIlByb21pc2VJbXBsIiwiaW52b2tlIiwicmVzb2x2ZSIsInJlamVjdCIsInJlc3VsdCIsIl9fYXdhaXQiLCJ0aGVuIiwidW53cmFwcGVkIiwiZXJyb3IiLCJwcmV2aW91c1Byb21pc2UiLCJjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZyIsIlR5cGVFcnJvciIsImluZm8iLCJyZXN1bHROYW1lIiwibmV4dCIsIm5leHRMb2MiLCJwdXNoVHJ5RW50cnkiLCJsb2NzIiwiZW50cnkiLCJ0cnlMb2MiLCJjYXRjaExvYyIsImZpbmFsbHlMb2MiLCJhZnRlckxvYyIsInRyeUVudHJpZXMiLCJwdXNoIiwicmVzZXRUcnlFbnRyeSIsImNvbXBsZXRpb24iLCJyZXNldCIsIml0ZXJhYmxlIiwiaXRlcmF0b3JNZXRob2QiLCJpc05hTiIsImxlbmd0aCIsImkiLCJkaXNwbGF5TmFtZSIsImlzR2VuZXJhdG9yRnVuY3Rpb24iLCJnZW5GdW4iLCJjdG9yIiwiY29uc3RydWN0b3IiLCJuYW1lIiwibWFyayIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiYXdyYXAiLCJhc3luYyIsIlByb21pc2UiLCJpdGVyIiwia2V5cyIsIm9iamVjdCIsInJldmVyc2UiLCJwb3AiLCJza2lwVGVtcFJlc2V0IiwicHJldiIsImNoYXJBdCIsInNsaWNlIiwic3RvcCIsInJvb3RSZWNvcmQiLCJydmFsIiwiZXhjZXB0aW9uIiwiaGFuZGxlIiwibG9jIiwiY2F1Z2h0IiwiaGFzQ2F0Y2giLCJoYXNGaW5hbGx5IiwiZmluYWxseUVudHJ5IiwiY29tcGxldGUiLCJmaW5pc2giLCJ0aHJvd24iLCJkZWxlZ2F0ZVlpZWxkIiwibW9kdWxlIiwicmVnZW5lcmF0b3JSdW50aW1lIiwiYWNjaWRlbnRhbFN0cmljdE1vZGUiLCJnbG9iYWxUaGlzIiwiRnVuY3Rpb24iLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJpZCIsImxvYWRlZCIsIl9fd2VicGFja19tb2R1bGVzX18iLCJubWQiLCJwYXRocyIsImNoaWxkcmVuIiwicCIsIkNhcmQiLCJ0ZW1wbGF0ZSIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZURlbGV0ZUNsaWNrIiwic2hvdWxkSGlkZURlbGV0ZUljb24iLCJsaWtlc0hhbmRsZXJzIiwibGluayIsIm93bmVySWQiLCJvd25lciIsIl9pZCIsImxpa2VzIiwiX2NhcmQiLCJyZW1vdmUiLCJfbmFtZSIsIl9saW5rIiwiX3RlbXBsYXRlIiwiX2hhbmRsZUNhcmRDbGljayIsIl9oYW5kbGVEZWxldGVDbGljayIsIl9zaG91bGRIaWRlRGVsZXRlSWNvbiIsIl9vd25lciIsIl9saWtlcyIsIl9saWtlc0hhbmRsZXJzIiwiY2FyZExpa2VzIiwicXVlcnlTZWxlY3RvciIsImxpa2VCdXR0b24iLCJ0ZXh0Q29udGVudCIsInN0eWxlIiwiZGlzcGxheSIsImlzVXNlckluZm9MaWtlIiwiY2xhc3NMaXN0IiwiYWRkIiwiY2xvbmVOb2RlIiwiY2FyZEltYWdlIiwic3JjIiwiYWx0IiwiX3Nob3VsZFNob3dMaWtlcyIsIl9yZW1vdmVDYXJkIiwiZGVsZXRlQnV0dG9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9vbkRlbGV0ZUJ1dHRvbkNsaWNrIiwidXBkYXRlZENhcmQiLCJjb250YWlucyIsImRlbGV0ZSIsIl9vbkxpa2VDbGljayIsInRleHQiLCJfb25DYXJkQ2xpY2siLCJfYWRkRGVsZXRlQnV0dG9uTGlzdGVuZXIiLCJfYWRkTGlrZUJ1dHRvbkxpc3RlbmVyIiwiX2FkZENhcmRJbWFnZUxpc3RlbmVyIiwiX2NyZWF0ZUNsb25lIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiQXBpIiwib3B0aW9ucyIsIl91cmwiLCJiYXNlVXJsIiwiX3Rva2VuIiwidG9rZW4iLCJmZXRjaCIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwicmVzcG9uc2UiLCJvayIsImpzb24iLCJjb25zb2xlIiwibG9nIiwic3RhdHVzIiwic3RhdHVzVGV4dCIsImFib3V0IiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJjYXJkSWQiLCJhdmF0YXIiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJldnQiLCJjbG9zZSIsIl9wb3B1cCIsImRvY3VtZW50IiwiX2hhbmRsZUVzY0Nsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInRhcmdldCIsIlBvcHVwV2l0aEltYWdlIiwiX2NhcmRJbWFnZVBvcHVwIiwiX2NhcmRUZXh0UG9wdXAiLCJQb3B1cFdpdGhGb3JtIiwiZm9ybVN1Ym1pdEhhbmRsZXIiLCJfZm9ybSIsIl9mb3JtU3VibWl0SGFuZGxlciIsIl9pbnB1dHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2Zvcm1WYWx1ZXMiLCJmb3JtQnV0dG9uIiwiX2dldElucHV0VmFsdWVzIiwiaW5wdXQiLCJpbnB1dFZhbHVlcyIsImlucHV0VmFsdWUiLCJpbmRleCIsInByZXZlbnREZWZhdWx0IiwiX29uU3VibWl0IiwiUG9wdXBXaXRoRGVsZXRlIiwicmVtb3ZlSGFuZGxlciIsIl9jYXJkSWQiLCJfcmVtb3ZlSGFuZGxlciIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiaXRlbSIsImVsZW1lbnQiLCJhZGRJdGVtIiwiYXBwZW5kIiwicHJlcGVuZCIsIlVzZXJJbmZvIiwidXNlck5hbWVTZWxlY3RvciIsInVzZXJKb2JTZWxlY3RvciIsInVzZXJBdmF0YXJTZWxlY3RvciIsIl91c2VyTmFtZSIsIl91c2VySm9iIiwiX2F2YXRhciIsIkZvcm1WYWxpZGF0b3IiLCJzZXR0aW5ncyIsImZvcm1FbGVtZW50IiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2Zvcm1FbGVtZW50IiwiX2lucHV0RWxlbWVudHMiLCJfYnV0dG9uRWxlbWVudCIsImlucHV0RWxlbWVudCIsImVycm9yRWxlbWVudCIsInZhbGlkYXRpb25NZXNzYWdlIiwiQXJyYXkiLCJmcm9tIiwic29tZSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiaGVhZGVyTG9nbyIsImdldEVsZW1lbnRCeUlkIiwiZWRpdFByb2ZpbGVJbmZvQnV0dG9uIiwiYWRkTmV3Q2FyZEJ1dHRvbiIsImVkaXRQcm9maWxlSW1hZ2VCdXR0b24iLCJjYXJkVGVtcGxhdGUiLCJjb250ZW50IiwicG9wdXBDYXJkSW1hZ2UiLCJwcm9maWxlVXNlckluZm8iLCJwb3B1cEVkaXRQcm9maWxlIiwiYXBpIiwiZWRpdFVzZXJJbmZvIiwicHJvZmlsZURhdGEiLCJzZXRVc2VySW5mbyIsInBvcHVwQWRkQ2FyZCIsInBvcHVwRGVsZXRlQnV0dG9uIiwicG9wdXBDaGFuZ2VQaWN0dXJlIiwiY2FyZHNTZWN0aW9uIiwiY3JlYXRlQ2FyZEVsZW1lbnQiLCJlZGl0UHJvZmlsZUluZm9Gb3JtVmFsaWRhdG9yIiwiZ2V0Rm9ybSIsImNoYW5nZVBpY3R1cmVGb3JtVmFsaWRhdG9yIiwiQWRkQ2FyZGZvcm1WYWxpZGF0b3IiLCJ0aXRsZSIsImFkZENhcmQiLCJjYXJkRGF0YSIsImNhcmQiLCJwcmVwZW5kSXRlbSIsImVkaXRQcm9maWxlSW1hZ2UiLCJwcm9maWxlSW1hZ2UiLCJzZXRBdmF0YXJMaW5rIiwiZGVsZXRlQ2FyZCIsImhlYWRlckxvZ29TcmMiLCJzZXRFdmVudExpc3RlbmVycyIsImUiLCJnZXRVc2VySW5mbyIsInNldElucHV0VmFsdWVzIiwicmVzZXRWYWxpZGF0aW9uIiwib3BlbiIsImVuYWJsZVZhbGlkYXRpb24iLCJhZGRMaWtlIiwiYmluZCIsImRlbGV0ZUxpa2UiLCJsaWtlc0xpc3QiLCJjcmVhdGVDYXJkIiwiYWxsIiwiZ2V0SW5pdGlhbENhcmRzIiwiY2FyZHMiLCJ1c2VySW5mbyIsInNldEl0ZW1zIiwiaW5pdCJdLCJzb3VyY2VSb290IjoiIn0=